define("router",[],function(){var e="gotoHome",t="gotoListening",n="gotoSubject",r="gotoSubjectHome",i="gotoResult",s=Backbone.Router.extend({routes:{"":"gotoHome","listening/:id":"gotoListening","subject/:id":"gotoSubjectHome","subject/:id/:id":"gotoSubject",result:"gotoResult"},initialize:function(){},gotoHome:function(){this.trigger(e)},gotoListening:function(e){this.trigger(t,e)},gotoSubjectHome:function(e){this.trigger(r,e)},gotoSubject:function(e,t){this.trigger(n,e,t)},gotoResult:function(){this.trigger(i)}});return s}),define("moduleManager",[],function(){var e={_modules:[],add:function(e){return this._modules.push(e),e},clear:function(){$.each(this._modules,function(e,t){try{t.reset()}catch(n){}})}};return _.extend(e,Backbone.Events),e}),define("text",{load:function(e){throw new Error("Dynamic load not allowed: "+e)}}),define("text!root-tpl/index/main.tpl",[],function(){return'<h1>LISTENING COMPREHENTION</h1>\r\n<div class="audio-list">\r\n	<h4>\r\n		<i class="current">{{=it.current}}</i>/<i class="total">{{=it.list.length}}</i>\r\n	</h4>\r\n	<div class="audio-wrap">\r\n		<ul rol="list">\r\n			{{~it.list :val:key}}\r\n			<li class="audio-item" rol="item" data-id="{{=val.id}}">\r\n				<div class="inner" rol="item-content">\r\n					<div class="mask"></div>\r\n					<img src="{{=val.resFaceName}}" width="100%" />\r\n					<a class="icon-listening" href="javascript:;">\r\n						<i class="icon-solid">&#xe900;</i>\r\n						<i class="icon-solid icon-focus">&#xe904;<i></i></i>\r\n					</a>\r\n					\r\n					<h5>{{=val.resAuthor}}</h5>\r\n				</div>\r\n				\r\n			</li>\r\n			{{~}}\r\n			\r\n		</ul>\r\n	</div>\r\n</div>'}),define("root-common/module/mobile/scroll",[],function(){var e="go",t=Backbone.View.extend({initialize:function(e){var t=this,n=new Hammer(t.$el[0]);t.timer=null,t.index=e.index||0,t.$items=$('[rol="item"]',t.$el),t.total=t.$items.size(),t.$firstItem=t.$items.eq(0),t._itemWidth=t.$firstItem.width(),t.$list=$('[rol="list"]',t.$el),t._offset=0,t._x=0,t._defaultLeft=t._getLeft(),t._setPosition(),n.on("panleft",t._move.bind(t)),n.on("panright",t._move.bind(t)),n.on("panend",t._panend.bind(t)),t.go(t.index)},events:{},_setPosition:function(){var e=this,t=e._itemWidth;e.$items.each(function(e){$(this).css({left:t*e})})},_getLeft:function(){var e=this,t=$(window).width(),n=$('[rol="item-content"]',e.$firstItem).width(),r=(t-n)/2;return r},_getOffset:function(e,t){var n=this,r=n.total-1,i=Math.min(0,r),s=Math.max(0,r),o=n._itemWidth,u=(n.total-1)*o;return e>0?{index:i,left:n._defaultLeft}:e<-u?{index:s,left:n._defaultLeft-u}:{index:t,left:e}},go:function(t){var n=this,r=n.$list.offset().left,i=n.$firstItem.width(),r=n._defaultLeft-t*i,s=n._getOffset(r,t);t=s.index,n.index=t,r=n._offset=s.left,n.timer&&clearTimeout(n.timer),n.timer=setTimeout(function(){n.trigger(e,t),n.$list.css({"-webkit-transform":"translate3d("+r+"px, 0, 0)"}),$('.active[rol="item"]',n.$el).removeClass("active"),$('[rol="item"]',n.$el).eq(t).addClass("active")},0)},_panend:function(e){var t=this,n=e.deltaX,r=t._itemWidth,i=Math.round((t._offset+n)/r),s=Math.abs(i);Math.abs(n)<r&&(n>0?s--:s++),s>t.total-1&&(s=t.total-1),i>0&&(s=0),t.go(s)},_move:function(e){var t=this,n=e.deltaX;t._x=n,this.move(n)},move:function(e){var t=this;t.timer&&clearTimeout(t.timer),t.timer=setTimeout(function(){var n=t._offset+e;t.$list.css({"-webkit-transform":"translate3d("+n+"px, 0, 0)"})},0)}});return t}),define("text!root-common/module/popup.tpl",[],function(){return'<div class="ui-pop\r\n{{ if(it.className){ }} {{=it.className}}{{ } }}\r\n{{ if(it.tip){ }} ui-pop-tip{{ } }}\r\n" id="ui-pop-{{=it.id}}" name="{{=it.name}}" style="z-index:{{=it.zIndex}}">\r\n    <div class="ui-popbox">\r\n        <div class="ui-popwrap">\r\n            {{ if(it.tip){ }}\r\n            <a class="ui-popclose ui-popaction" href="javascript:;"></a>\r\n            {{ }else{ }}\r\n                {{ if(it.hasHd){ }}\r\n                <div class="ui-pophd\r\n                {{ if(!it.isMove){ }}\r\n                nomove\r\n                {{ } }}\r\n                ">\r\n                    <span class="ui-poptitle"></span>\r\n                    <a class="ui-popclose ui-popaction" href="javascript:;"></a>\r\n                    {{ if(it.isMax){ }}\r\n                    <a class="ui-popmax ui-popaction" href="javascript:;"></a>\r\n                    <a class="ui-popdefault ui-popaction" href="javascript:;"></a>\r\n                    {{ } }}\r\n                </div>\r\n                {{ } }}\r\n            {{ } }}\r\n            \r\n            <div class="ui-popmain"></div>\r\n        </div>\r\n    </div>\r\n</div>\r\n'}),define("root-common/module/popup",["text!./popup.tpl"],function(e,t,n){var r="close",i=/msie 6/i.test(window.navigator.userAgent),s={data:[],zIndex:100,number:0,config:{title:"",custom:null,fade:!1,delay:3e3,ajax:!1,url:"",iframe:null,name:"",isMax:!1,mask:!1,tip:!1,className:"",isMove:!0,hasHd:!0,containerBoderWidth:1},close:function(e){var t;if(this.data.length>0){$.each(this.data,function(n,r){r.id===e&&(t=n)});var n=this.data[t];n.container.remove(),n.opts.mask&&n.mask.remove(),this.data.splice(t,1)}return e}},o=Backbone.View.extend({initialize:function(t,n){var r=this;r._tpl=doT.template(e),r.build(t,n)},events:{"click .ui-popclose":"close","click .ui-popmax":"maximize","click .ui-popdefault":"defaultsize","mousedown .ui-pophd":"move"},build:function(e,t){var n=this;this.opts=$.extend({},s.config,e),this.id=t,this.name=this.opts.name,this.container=$(this._tpl({id:this.id,zIndex:++s.zIndex,name:this.name,isMax:this.opts.isMax,tip:this.opts.tip,className:this.opts.className,isMove:this.opts.isMove,hasHd:this.opts.hasHd})).appendTo("body"),this.opts.mask&&(this.mask=$('<div class="ui-mask" id="ui-mask-'+this.id+'"></div>').appendTo("body").css({height:$(document).height()})),this.setElement(this.container),this.iframe=null,this.wrap=$(".ui-popmain",this.container),this.closeBtn=$(".ui-popclose",this.container),this.maxBtn=$(".ui-popmax",this.container),this.defaultBtn=$(".ui-popdefault",this.container),this.iframeMask=$('<div class="ui-iframe-mask" />'),this.wrapMargin=0,this.containerBoderWidth=this.opts.containerBoderWidth,this.opts.hasHd?this.titleHeight=$(".ui-pophd",n.$el).outerHeight():this.titleHeight=0,this.show()},show:function(){var e=this;i&&this.container.css({position:"absolute"}),this.container.find(".ui-poptitle").html(this.opts.title),this._show()},_show:function(){this.opts.fade&&setTimeout($.proxy(this,"close"),this.opts.delay),this.opts.custom&&this.getCustom(),this.opts.ajax&&this.ajax(),this.opts.iframe&&this.getIframe(),this.setDefaultSize(),this.reposition(),this.container.bind("mousedown",$.proxy(this,"addZIndex"))},ajax:function(){var e=this;$.ajax({url:this.opts.url,cache:!1}).done(function(t){e.wrap.html(t),e.setDefaultSize(),e.reposition()}).error(function(){alert("error")})},setDefaultSize:function(){this.defaultWidth=this.wrap.outerWidth()+this.wrapMargin*2,this.defaultHeight=this.wrap.outerHeight()+this.wrapMargin*2},resize:function(){this.wrap.css({width:this.wrap.find(">*").outerWidth()}),this.setDefaultSize(),this.reposition()},getIframe:function(){var e=this;$(".iframe").clone().appendTo(this.wrap),this.iframe=this.wrap.find("iframe"),this.iframe.show().removeClass("iframe").attr("src",this.opts.iframe.url),this.iframe.load($.proxy(this,"iframeOnload"))},getCustom:function(){this.wrap.html(this.opts.custom)},close:function(e){e&&e.preventDefault(),s.close(this.id),this.trigger(r)},reposition:function(){var e=this.defaultHeight+this.containerBoderWidth*2;this.opts.tip||(e+=this.titleHeight),this.container.css({width:this.defaultWidth+this.containerBoderWidth*2,height:e,top:Math.max(($(window).height()-this.defaultHeight-this.titleHeight-this.containerBoderWidth*2)/2,0),left:($(window).width()-this.defaultWidth-this.containerBoderWidth*2)/2})},maximize:function(){this.container.css({top:0,left:0,width:$(window).width(),height:$(window).height()}),this.wrap.css({width:$(window).width()-this.containerBoderWidth*2-this.wrapMargin*2,height:$(window).height()-this.titleHeight-this.containerBoderWidth*2-this.wrapMargin*2}),this.opts.iframe||this.wrap.find(">*").css({width:$(window).width()-this.containerBoderWidth*2-this.wrapMargin*2,height:$(window).height()-this.titleHeight-this.containerBoderWidth*2-this.wrapMargin*2}),this.maxBtn.addClass("ui-popmax-hide"),this.defaultBtn.show()},defaultsize:function(){this.container.css({width:this.defaultWidth+this.containerBoderWidth*2,height:this.defaultHeight+this.titleHeight+this.containerBoderWidth*2}),this.wrap.css({width:this.defaultWidth-this.wrapMargin*2,height:this.defaultHeight-this.wrapMargin*2}),this.opts.iframe||this.wrap.find(">*").css({width:this.defaultWidth-this.wrapMargin*2,height:this.defaultHeight-this.wrapMargin*2}),this.reposition(),this.maxBtn.removeClass("ui-popmax-hide"),this.defaultBtn.hide()},addZIndex:function(e){$(this.container).css("z-index",++s.zIndex)},move:function(e){if(!this.opts.isMove)return;var t=this,n=e.clientY-this.container.position().top,r=e.clientX-this.container.position().left,i=$(window).width()-this.container.outerWidth(),s=$(window).height()-this.container.outerHeight(),o,u;$(document).bind("mousemove",function(e){o=e.clientY-n,u=e.clientX-r,t.container.css({left:Math.min(i,Math.max(0,u)),top:Math.min(s,Math.max(0,o))}),t._showIframeMask()}).bind("mouseup",function(){t._hideIframeMask(),$(this).unbind("mousemove")})},iframeOnload:function(){this.wrap.css({width:this.opts.iframe.width,height:this.opts.iframe.height}),this.iframe.show(),this.iframeMask.appendTo(this.wrap),this.setDefaultSize(),this.reposition(),this.iframeMask.bind("mousedown",$.proxy(this,"_hideIframeMask"))},_hideIframeMask:function(e){this.iframeMask.hide()},_showIframeMask:function(e){this.iframeMask.show()}});return{create:function(e){var t=new o(e,++s.number);return s.data.push(t),t}}}),define("root-common/util",["./module/popup","require","exports"],function(e,t,n){function r(e,t){if(!$.browser.msie)t?window.open(e,t):location.href=e;else{var n=$('<a href="'+e+'" target="'+(t||"_self")+'"> </a>')[0];document.body.appendChild(n),n.click()}}function i(e,t){return t===undefined?t=new Date:$.isNumeric(t)&&(t=new Date(parseInt(t,10))),e.replace(/([YMDhsm])\1*/g,function(e){switch(e.charAt()){case"Y":return f(t.getFullYear(),e);case"M":return f(t.getMonth()+1,e);case"D":return f(t.getDate(),e);case"w":return t.getDay()+1;case"h":return f(t.getHours(),e);case"m":return f(t.getMinutes(),e);case"s":return f(t.getSeconds(),e)}})}function s(e,t,n){$.type(t)=="date"?t=t.getTime():t=parseInt(t);var r=new Date(t),i=r.getHours();return r>432e5&&(i+=Math.floor(r/432e5)),n&&(e=e.replace(/(\w)\1+/g,"$1")),e.replace(/([hms])\1*/g,function(t){switch(t.charAt()){case"h":return f(i-8,t);case"m":var n=(/h+/.test(e)?0:i-8)*60+r.getMinutes();return f(n,t);case"s":return f(r.getSeconds(),t)}})}function u(e,t,n){$.isNumeric(e)&&(e=new Date(parseInt(e,10))),$.isNumeric(t)&&(t=new Date(parseInt(t,10))),e===undefined&&(e=new Date),t===undefined&&(t=new Date),n||(n="YYYY年MM月DD日");var r=new Date(t.toDateString()),s=(+t- +e)/1e3,u=(+t- +r)/1e3;return s<=60?"刚刚":s<=3600?Math.floor(s/60)+"分钟前":s<=u?Math.floor(s/3600)+"小时前":s<=u+o?"昨天":s<=u+o*2?"前天":s<=u+o*25?Math.floor(s/o)+"天前":i(n,e)}function a(e,t){return e<36e5?s("mm分ss秒",e,t):s("hh小时mm分ss秒",e,t)}function f(e,t){return t=t.length,e=e||0,t==1?e:(e=String(Math.pow(10,t)+e)).substr(e.length-t)}function l(e){var t=/[\?\&]([^&]+=[^&#]+)/g,n,r=[],i="",s=window.location.href;while(n=t.exec(s))r.push(n[1]);return e?($.each(r,function(t,n){if(n.indexOf(e)!==-1){var r=n.indexOf("=");return i=n.slice(r+1),!1}}),i):r}function c(t,n){return e.create({title:"提示",custom:'<i class="icon icon-error"></i>'+t,tip:!0,fade:n})}function h(t){return e.create({title:"提示",custom:'<i class="icon icon-success"></i>'+t,tip:!0,fade:!0})}function p(t,n){var r={title:"提示",custom:t,tip:!0,fade:n};return e.create(r)}function d(e,t,n){var t=t||{};try{if($.isEmptyObject(t)){if(n){var r=n.responseText,i="状态："+n.status+"， 异常信息："+n.statusText;if(r)try{r=$.parseJSON(r),i="请求地址："+r.path+"， "+i}catch(s){}c(i)}}else t.resCode=="0000"?e&&e():(e&&e(!0),t&&$.type(t)=="object"&&t[1]=="timeout"?c("网络请求慢，连接超时，请重试",!0):c(t.resMsg,!0))}catch(s){throw"ajax data error:"+s}}function v(e,t,n){var t=t||{};try{t.resCode=="0000"?e&&e():e&&e(!0)}catch(r){throw"ajax data error:"+r}}function m(e,t){var n=[],r={};return $.each(e,function(e,i){var s=t?i[t]:i;r[s]||(n.push(i),r[s]=1)}),n}function g(e,t,n){return e.slice(0,n)+t+e.slice(n)}function y(e,t,n){var r=this,i=$.extend({dataType:"json",success:function(i){r.trigger(t,i,null,e.data,n)},error:function(e,n,i){r.trigger(t,null,e)}},e);$.ajax(i)}function b(){_keyStr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",this.encode=function(e){var t="",n,r,i,s,o,u,a,f=0;e=_utf8_encode(e);while(f<e.length)n=e.charCodeAt(f++),r=e.charCodeAt(f++),i=e.charCodeAt(f++),s=n>>2,o=(n&3)<<4|r>>4,u=(r&15)<<2|i>>6,a=i&63,isNaN(r)?u=a=64:isNaN(i)&&(a=64),t=t+_keyStr.charAt(s)+_keyStr.charAt(o)+_keyStr.charAt(u)+_keyStr.charAt(a);return t},this.decode=function(e){var t="",n,r,i,s,o,u,a,f=0;e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");while(f<e.length)s=_keyStr.indexOf(e.charAt(f++)),o=_keyStr.indexOf(e.charAt(f++)),u=_keyStr.indexOf(e.charAt(f++)),a=_keyStr.indexOf(e.charAt(f++)),n=s<<2|o>>4,r=(o&15)<<4|u>>2,i=(u&3)<<6|a,t+=String.fromCharCode(n),u!=64&&(t+=String.fromCharCode(r)),a!=64&&(t+=String.fromCharCode(i));return t=_utf8_decode(t),t},_utf8_encode=function(e){e=e.replace(/\r\n/g,"\n");var t="";for(var n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t+=String.fromCharCode(r):r>127&&r<2048?(t+=String.fromCharCode(r>>6|192),t+=String.fromCharCode(r&63|128)):(t+=String.fromCharCode(r>>12|224),t+=String.fromCharCode(r>>6&63|128),t+=String.fromCharCode(r&63|128))}return t},_utf8_decode=function(e){var t="",n=0,r=c1=c2=0;while(n<e.length)r=e.charCodeAt(n),r<128?(t+=String.fromCharCode(r),n++):r>191&&r<224?(c2=e.charCodeAt(n+1),t+=String.fromCharCode((r&31)<<6|c2&63),n+=2):(c2=e.charCodeAt(n+1),c3=e.charCodeAt(n+2),t+=String.fromCharCode((r&15)<<12|(c2&63)<<6|c3&63),n+=3);return t}}var o=86400;n.openURL=r,n.formatDate=i,n.formatTime=s,n.formatNumber=f,n.formatTime=s,n.formatTimeE=a,n.release=u,n.queryString=l,n.errorTip=c,n.successTip=h,n.tip=p,n.dealAjax=d,n.insertStr=g,n.unique=m,n.request=y,n.mDealAjax=v,n.Base64=b}),define("model",["root-common/util"],function(e){var t="findAll",n="findSubject",r=Backbone.Model.extend({initialize:function(){},findAll:function(n){n=$.extend({type:"post",url:window.serviceBase+"/weixin/weixinInterface/getTestResourse"},n),e.request.call(this,n,t)},findSubject:function(t){t=$.extend({type:"post",url:window.serviceBase+"/weixin/weixinInterface/getTopic"},t),e.request.call(this,t,n)},sendAnswer:function(t){t=$.extend({type:"post",url:window.serviceBase+"/weixin/weixinInterface/sendAnswer"},t),e.request.call(this,t)}});return r}),define("auto-domain",[],function(){var e="online",t=location.hostname,n="192.168.12.250",r="8080",i="http://",s=/192.168|localhost|debug./;s.test(t)&&(e="test");try{e=="test"?window.serviceBase=i+n+":"+r:window.serviceBase=i+t}catch(o){alert("自适应域名脚本执行错误!\n")}}),define("index/main",["text!root-tpl/index/main.tpl","root-common/module/mobile/scroll","../model","root-common/util","../auto-domain"],function(e,t,n,r){var i=Backbone.View.extend({initialize:function(){var t=this;t._tpl=doT.template(e),t._timer=null,t._scroll=null,t._isRender=!1,t._model=new n,t._model.bind({findAll:t._getList.bind(t)}),t._data=null,$(window).resize(function(){t._isRender&&t.render()})},events:{"click .audio-item .icon-listening":"listen"},init:function(){var e=this;e._data=null,e._model.findAll({data:{deviceId:window.deviceId,userAgent:navigator.userAgent}}),$("html").removeClass().addClass("bg-index")},render:function(){var e=this,n=e._data;try{var r=Math.round(n.length/2);e.$el.html(e._tpl({list:n,current:r})),e._scroll=new t({el:$(".audio-wrap",e.$el),index:r}),e._scroll.bind("go",function(t){$("h4 .current",e.$el).text(t+1)}),e._isRender=!0}catch(i){}},reset:function(){this.$el.html(""),this._scroll=null,this._isRender=!1},listen:function(e){var t=$(e.target).closest(".audio-item").data("id");setTimeout(function(){location.href="#listening/"+t},300)},_getList:function(e,t){var n=this;r.mDealAjax(function(t){t||(n._data=e.testResourse,n.render())},e,t)}});return i}),define("text!root-tpl/listening/main.tpl",[],function(){return'<div class="btn-back">\r\n	<a class="icon-linear" href="#">&#xe900;</a>\r\n</div>\r\n<div class="listen-area">\r\n	<h1>{{=it.resTitle}}</h1>\r\n	<div class="btn-listen">\r\n		<i class="icon-solid icon-start">&#xe905;</i>\r\n		<i class="icon-solid icon-resume">&#xe906;</i>\r\n	</div>\r\n	<audio id="Audio" controls="controls" unselectable="on" preload="true"><source src="{{=it.resExistingName}}" type="audio/mpeg"></audio>\r\n	<div class="wave">\r\n		<img src="images/wave.gif" />\r\n		<div class="line"></div>\r\n	</div>\r\n\r\n</div>\r\n'}),define("listening/main",["text!root-tpl/listening/main.tpl","../model","root-common/util"],function(e,t,n){var r=Backbone.View.extend({initialize:function(){var n=this;n._tpl=doT.template(e),n._audio=null,n._isPlaying=!1,n._playTimer=null,n._timer=null,n._model=new t,n._model.bind({findAll:n._getList.bind(n)}),n._data=null,n._id=null,n._hasLoaded=!1},events:{"tap .listen-area":"_toggleListen"},init:function(e){var t=this;t._data=null,t._id=e,t._model.findAll({data:{deviceId:window.deviceId,userAgent:navigator.userAgent}}),$("html").removeClass().addClass("bg-listening")},render:function(){var e=this;try{var t=e._data;e.$el.html(e._tpl(t)),e._audio=$("#Audio")[0],e._audio.addEventListener("progress",function(){setTimeout(function(){e._hasLoaded=!0},300)}),e._audio.addEventListener("canplaythrough",function(){e._hasLoaded=!0})}catch(n){}},reset:function(){var e=this;e.$el.html(""),e._hasLoaded=!1,e._audio&&e.pause()},_toggleListen:function(e){var t=this,n=t._audio;if(!t._hasLoaded)return;$(e.currentTarget).toggleClass("listen-playing"),t._isPlaying?t.pause():t.resume()},pause:function(){var e=this,t=e._audio;try{e._timer&&clearTimeout(e._timer),e._timer=setTimeout(function(){e._isPlaying=!1,t.pause()},30)}catch(n){}},resume:function(){var e=this,t=e._audio;try{e._timer&&clearTimeout(e._timer),e._timer=setTimeout(function(){e._isPlaying=!0,t.play()},30),e._playTimer&&clearInterval(e._playTimer),e._playTimer=setInterval(function(){t.ended&&(location.href="#subject/"+e._id,clearInterval(e._playTimer))},30)}catch(n){}},_getList:function(e,t){var r=this;n.mDealAjax(function(t){if(!t){var n=e.testResourse;e=_.where(n,{id:r._id}),r._data=e[0],r.render()}},e,t)}});return r}),define("text!root-tpl/subject/main.tpl",[],function(){return'<div class="rate-group">\r\n	{{~it.list :val:key}}\r\n	{{\r\n		var hasAnswer = _.where(it.resultList, {topicId: val.id})[0];\r\n\r\n	}}\r\n	<span class="rate-item\r\n	{{ if(hasAnswer && hasAnswer.answerIscorrect == 1){ }}\r\n	 rate-done\r\n	{{ } }}\r\n	{{ if(hasAnswer && hasAnswer.answerIscorrect == 0){ }}\r\n	 rate-error\r\n	{{ } }}\r\n	">\r\n		<i class="icon-linear icon-default">&#xe901;</i>\r\n		<i class="icon-solid icon-done">&#xe902;</i>\r\n		<i class="icon-solid icon-error">&#xe901;</i>\r\n	</span>\r\n	{{~}}\r\n	\r\n</div>\r\n<h1>{{=it.data.topicContent}}</h1>\r\n<div class="subject-list">\r\n	{{~it.data.answerlist :val:key}}\r\n	<div class="subject-item" data-answer="{{=val.answerIscorrect}}" data-id="{{=val.id}}">\r\n		<span class="icon-group">\r\n			<i class="icon-linear icon-ready">&#xe904;</i>\r\n			<i class="icon-solid icon-done">&#xe903;</i>\r\n		</span>\r\n		\r\n		{{=val.answerContent}}\r\n		<div class="result">\r\n			<i class="icon-linear icon-write">&#xe902;</i>\r\n			<i class="icon-linear icon-wrong">&#xe903;</i>\r\n		</div>\r\n	</div>\r\n	{{~}}\r\n	\r\n</div>\r\n<div style="display:none;">\r\n	<audio class="right-audio" controls="controls" unselectable="on" preload="true"><source src="images/right_tips.mp3" type="audio/mpeg"></audio>\r\n	<audio class="error-audio" controls="controls" unselectable="on" preload="true"><source src="images/error.wav" type="audio/mpeg"></audio>\r\n</div>\r\n'}),define("subject/main",["text!root-tpl/subject/main.tpl","../model","root-common/util"],function(e,t,n){var r=Backbone.View.extend({initialize:function(){var n=this;n._tpl=doT.template(e),n._answerList=[],n._model=new t,n._model.bind({findSubject:n._getSubject.bind(n)}),n.reset()},events:{"tap .subject-item":"_answer"},init:function(e,t){var n=this;n._id=e,n._subjectId=t,n._isHome=t?!1:!0,t||(n._answerList=[]),n._model.findSubject({data:{deviceId:window.deviceId,userAgent:navigator.userAgent,resId:e}}),$("html").removeClass().addClass("bg-subject")},render:function(){var e=this,t=e._data||[];try{var n=e._isHome,r=n?0:_.findLastIndex(t,{id:e._subjectId});e._subjectId=t[r].id,e._index=r;var i=t[r];e.$el.html(e._tpl({list:t,isHome:n,data:i,resultList:e._answerList})),e._errorAudio=$(".error-audio",e.$el)[0],e._rightAudio=$(".right-audio",e.$el)[0]}catch(s){}},reset:function(){var e=this;e.$el.html(""),e._hasAnswer=!1,e._data=null,e._isHome=!0,e._id=null,e._subjectId=null,e._index=null,e._errorAudio=null,e._rightAudio=null},_answer:function(e){var t=this;if(!t._hasAnswer){var n=$(e.currentTarget),r=n.data("answer"),i=n.data("id"),s=r==1,o=t._index;n.addClass(s?"subject-item-write":"subject-item-wrong"),t._hasAnswer=!0,t._answerList.push({topicId:t._subjectId,answerIds:i,answerIscorrect:~~s}),s?t._rightAudio.play():t._errorAudio.play(),setTimeout(function(){if(o==t._data.length-1){var e=JSON.stringify(t._answerList);t._model.sendAnswer({data:{deviceId:window.deviceId,userAgent:navigator.userAgent,answerresult:e}}),location.href="#result"}else location.href="#subject/"+t._id+"/"+t._data[o+1].id},2e3)}},_getSubject:function(e,t){var r=this;n.mDealAjax(function(t){t||(r._data=e.topicBasic,r.render())},e,t)}});return r}),define("text!root-tpl/result/main.tpl",[],function(){return'<h1>GOOD JOB  !</h1>\r\n<div class="more">\r\n	WANT <i>MORE</i> EXERSISE? \r\n</div>\r\n<a class="gohome" href="#">\r\n	<span>LET\'S<br />GO!</span>\r\n	<i></i>\r\n</a>'}),define("result/main",["text!root-tpl/result/main.tpl"],function(e){var t=Backbone.View.extend({initialize:function(){var t=this;t._tpl=doT.template(e),t._data=null},events:{},init:function(){var e=this;e.render()},render:function(){var e=this;e.$el.html(e._tpl({})),$("html").removeClass().addClass("bg-result")},reset:function(){this.$el.html("")}});return t}),require(["./router","./moduleManager","./index/main","./listening/main","./subject/main","./result/main"],function(e,t,n,r,i,s){function o(){var e=$(window).width();if(e>700)var t=24;else var t=e*12/320;$("html").css("font-size",t+"px")}function u(){var e=localStorage.getItem("ly_wechat_deviceid");return e||(e="xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=Math.random()*16|0,n=e=="x"?t:t&3|8;return n.toString(16)}).toUpperCase()),localStorage.setItem("ly_wechat_deviceid",e),e}function p(){t.clear()}window.deviceId=u(),o(),$(window).resize(o);var a=new e,f=t.add(new n({el:"#IndexPage"})),l=t.add(new r({el:"#ListeningPage"})),c=t.add(new i({el:"#SubjectPage"})),h=t.add(new s({el:"#ResultPage"}));a.bind({gotoHome:function(){p(),f.init()},gotoListening:function(e){p(),l.init(e)},gotoSubject:function(e,t){p(),c.init(e,t)},gotoSubjectHome:function(e){p(),c.init(e)},gotoResult:function(e){p(),h.init()}}),Backbone.history.start()}),define("main",function(){});