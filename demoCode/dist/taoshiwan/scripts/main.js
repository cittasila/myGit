define("router",[],function(){var e="gotoHome",t="gotoLogin",n="gotoRole",r="gotoStudent",i="gotoTeacher",s=Backbone.Router.extend({routes:{"":"gotoHome",login:"gotoLogin",role:"gotoRole",student:"gotoStudent",teacher:"gotoTeacher"},initialize:function(){},gotoHome:function(){this.trigger(e)},gotoLogin:function(){this.trigger(t)},gotoRole:function(){this.trigger(n)},gotoStudent:function(){this.trigger(r)},gotoTeacher:function(){this.trigger(i)}});return s}),define("moduleManager",[],function(){var e={_modules:[],add:function(e){return this._modules.push(e),e},clear:function(){$.each(this._modules,function(e,t){try{t.reset()}catch(n){}})}};return _.extend(e,Backbone.Events),e}),define("text",{load:function(e){throw new Error("Dynamic load not allowed: "+e)}}),define("text!root-tpl/index/main.tpl",[],function(){return'<div class="g-header">\r\n	<div class="ui-content">\r\n		<div class="w920">\r\n			<div class="logo-youyang">\r\n				<a href="http://www.51taoshi.com/"></a>\r\n			</div>\r\n			<div class="logo">\r\n				<a href="#"></a>\r\n				<i class="caret"></i>\r\n			</div>\r\n		</div>\r\n	</div>\r\n</div>\r\n<div class="p-container">\r\n	<div class="ui-top w920">\r\n		<div class="tip-area">\r\n			<a href="javascript:;" class="btn-tip"></a>\r\n			<div class="panel-tip">\r\n				<div class="tip-mask"></div>\r\n				<div class="txt">\r\n					适用对象：小学、初中、高中生QQ客<br />\r\n					服群：163010678<br />\r\n					扫描方式：建议用QQ、支付宝“扫一<br />\r\n					扫”或UC、搜狗、百度、360、小米、<br />\r\n					QQ浏览器“扫一扫”下载安装（不支<br />\r\n					持微信扫一扫）\r\n				</div>\r\n				\r\n			</div>\r\n		</div>\r\n		<div class="ui-login">\r\n			<div class="shengdan"></div>\r\n			<div class="ui-mask"></div>\r\n			<div class="qrcode-area">\r\n				<div class="qrcode">\r\n					<img src="images/jiaoshi.png" /><br />\r\n					老师注册攻略\r\n				</div>\r\n				<div class="qrcode">\r\n					<img src="images/xuesheng.png" /><br />\r\n					学生注册攻略\r\n				</div>\r\n			</div>\r\n			<div class="ui-content">\r\n				<form action="" id="">\r\n					<div class="frm-column frm-column-field">\r\n						<label class="frm-label">\r\n							登录名：\r\n						</label>\r\n						<div class="frm-control">\r\n							<input type="text" name="name" id="userNames" class="frm-txt" />\r\n						</div>\r\n					</div>\r\n					<div class="frm-column frm-column-field">\r\n						<label class="frm-label">\r\n							密&nbsp;&nbsp;&nbsp;码：\r\n						</label>\r\n						<div class="frm-control">\r\n							<input type="password" name="password" id="passwds" class="frm-txt" />\r\n						</div>\r\n					</div>\r\n					<div class="frm-column">\r\n						<a href="javascript:void(0);" class="ui-btn btn-login">登&nbsp;&nbsp;&nbsp;&nbsp;录</a>\r\n					</div>\r\n					<div class="frm-column fix">\r\n						<a href="/LoginAction.action?method=findPwd" class="forget-pw">忘记密码？</a>								\r\n					</div>\r\n					<div class="frm-column">\r\n						<div class="qq-login">\r\n							<a href="javascript:void(0);" class="ui-btn btn-register">免费注册</a>\r\n						</div>\r\n					</div>\r\n					\r\n				</form>\r\n			</div>\r\n		</div>\r\n	</div>\r\n	<div class="ui-intro w920">\r\n		<ul class="ui-nav fix">\r\n			<li class="ui-nav-item ui-item-current">学  生</li>\r\n			<li class="ui-nav-item ui-item-last">家  长</li>\r\n		</ul>\r\n		<div class="ui-panel">\r\n			<div class="ui-panel-border"></div>\r\n			<ul class="ui-panel-item fix">\r\n				<li>\r\n					<div class="img">\r\n						<img src="images/icon-stu-1.png" />\r\n					</div>\r\n					<div class="txt">\r\n						<h4>“听说读写“不求人，你的贴身“大白”来也</h4>\r\n						<p>即使老师和学霸不再身边，也不用担心英语“四大金刚“啦，24小时无限次在线系统评分、五维能力评价及历史记录对比，帮助学生不断总结经验，实现高分和突破，轻松实现个性化“教与学”的在线学习。</p>\r\n					</div>\r\n				</li>\r\n				<li class="even">\r\n					<div class="img">\r\n						<img src="images/icon-stu-2.png" />\r\n					</div>\r\n					<div class="txt">\r\n						<h4>享受“一对一”人机智能交互</h4>\r\n						<p>每个学生都是独一无二的，个性化智能学习的时代已经到来，人类的学习再也不用看时间和空间的眼色，它改变了原有一成不变的学习内容和授课难度，鼓励学生不断优化修改，激发学生“听说读写”无限热情。</p>\r\n					</div>\r\n				</li>\r\n				<li>\r\n					<div class="img">\r\n						<img src="images/icon-stu-4.png" />\r\n					</div>\r\n					<div class="txt">\r\n						<h4>适合你的才是最好的，最重要是你喜欢</h4>\r\n						<p>专为国内K12学生精心挑选的国外优质原版读物、重要知识点视频和交互式习题，自适应阅读学习系统定期为每个学生挑选“限量定制版”读物，连国民老公王XX都未必看过哦。 </p>\r\n					</div>\r\n				</li>\r\n				<li class="even">\r\n					<div class="img">\r\n						<img src="images/icon-stu-3.png" />\r\n					</div>\r\n					<div class="txt">\r\n						<h4>私人定制“学习管家”，你值得拥有</h4>\r\n						<p>不是每个学生都能遇见好老师，进入传说中的好学校，在这里，你可以通过自适应学习系统获取“公平优质”的教育资源，有大把大把的地球人在互动学习社区等你加入和分享呢。</p>\r\n					</div>\r\n				</li>\r\n				<li>\r\n					<div class="img">\r\n						<img src="images/icon-stu-6.png" />\r\n					</div>\r\n					<div class="txt">\r\n						<h4>”美貌和智慧”并存的数据报告</h4>\r\n						<p>提供个人成长足迹数据报告，结合科学算法评估个人“听说读写“能力和薄弱环节，及时了解自己的成绩变化，制定更具针对性的学习计划，经多年“实战”经验，学生对分数质疑也明显减少。</p>\r\n					</div>\r\n				</li>\r\n				<li class="even">\r\n					<div class="img">\r\n						<img src="images/icon-stu-5.png" />\r\n					</div>\r\n					<div class="txt">\r\n						<h4>与国内教纲匹配的“17背单词大法”</h4>\r\n						<p>随时随地在线口语练习和智能语音评分纠错，每天只需花20分钟即可从容实现“学与练”，不但可以PK掉学霸，还可以获得女神的垂慕，爸爸妈妈从此再也不用担心你的英语，岂不是一举三得！</p>\r\n					</div>\r\n				</li>\r\n			</ul>\r\n			<ul class="ui-panel-item fix" style="display:none;">\r\n				<li>\r\n					<div class="img">\r\n						<img src="images/icon-desc-1.png" />\r\n					</div>\r\n					<div class="txt">\r\n						<h4>英语界也存在“速度与激情”</h4>\r\n						<p>每学年可以节省约95小时的工作时间，享受“闪电侠”式的作业发布、极速评分、过程性评价体验，只要您会点鼠标，再繁琐的工作都能一键搞定，每天多睡几小时。</p>\r\n					</div>\r\n				</li>\r\n				<li class="even">\r\n					<div class="img">\r\n						<img src="images/icon-desc-2.png" />\r\n					</div>\r\n					<div class="txt">\r\n						<h4>从“压力山大”到“轻松自如”</h4>\r\n						<p>这都21世纪了，还再沿用“解放前式的陪读”教育模式，这脸面丢到火星啦，现在就能通过“人工智能测评系统V2.0“针对学生的学习效果进行客观评估，在最短时间内了解每位学生的学习反馈和学习痕迹，为后期教学进行有力完善。</p>\r\n					</div>\r\n				</li>\r\n				<li>\r\n					<div class="img">\r\n						<img src="images/icon-desc-3.png" />\r\n					</div>\r\n					<div class="txt">\r\n						<h4>互联网+教育又一伟大发明“自适应”</h4>\r\n						<p>老师不布置作业，学生的英语成绩也能提高？答案是YES! 	系统自带阅读前测，帮助学生了解对应阅读水平，还能“智能定位”起始阅读等级，系统按照“自适应节奏”为学生制定阶段性阅读计划，不信快来试试！ </p>\r\n					</div>\r\n				</li>\r\n				<li class="even">\r\n					<div class="img">\r\n						<img src="images/icon-desc-4.png" />\r\n					</div>\r\n					<div class="txt">\r\n						<h4>360°智能报告，给您最关心的“数据”</h4>\r\n						<p>N类报告一手掌握，老师通过报告全面了解班级、小组和学生个人的“听说读写”能力缺陷或进步度，结合数据报告、错误汇总、能力解析等细节报告一一掌握学生和班级学习状态，随时调整教学思路。</p>\r\n					</div>\r\n				</li>\r\n				<li>\r\n					<div class="img">\r\n						<img src="images/icon-desc-5.png" />\r\n					</div>\r\n					<div class="txt">\r\n						<h4>17English产品好不好用，小明都说“好！”</h4>\r\n						<p>不得不提上海地区的部分学校，老师们平均每周布置5.6篇作业，学生考试平均分提高了20.23%，约62.4%的学生觉得“学习英语更有信心了，从中获得更多乐趣“。</p>\r\n					</div>\r\n				</li>\r\n				<li class="even">\r\n					<div class="img">\r\n						<img src="images/icon-desc-6.png" />\r\n					</div>\r\n					<div class="txt">\r\n						<h4>不得不提的精英团队，牛X到爆表</h4>\r\n						<p>专业的产品、专业的资源、专业的系统，还得要专业靠谱的团队才能实现，海龟+博士暂且不提，光是每天平均工作时间达到10.5个小时，处女、天秤和摩羯座稳居前三名的超级无敌组合+极致完美主义的办事风格，没有两把刷子的产品，我们都不好意思亮出来。</p>\r\n					</div>\r\n				</li>\r\n			</ul>\r\n		</div>\r\n	</div>\r\n</div>\r\n<div class="g-bottom">\r\n	<p>版权所有：上海朗鹰教育科技有限公司 沪ICP备 11021655</p>\r\n	<p>邮箱：customer.service@lyced.com</p>\r\n</div>'}),define("text!root-tpl/index/role.tpl",[],function(){return'<div class="pop-role">\r\n	<div class="role-list fix">\r\n		<a class="role-item" href="#teacher">\r\n			<button class="btn btn-role btn-role-teacher">我是老师</button>\r\n		</a>\r\n		<a class="role-item role-student" href="#student">\r\n			<button class="btn btn-role btn-role-student">我是学生</button>\r\n		</a>\r\n	</div>\r\n</div>'}),define("text!root-tpl/index/student.tpl",[],function(){return'<div class="pop-student">\r\n	<form class="form student-form" action="">\r\n		<div class="form-control clearfix">\r\n	        <label class="label" for="realname"><i>*</i>真实姓名</label>\r\n	        <input type="text" class="form-input" name="realname" id="realname" placeholder="请填写真实姓名" />\r\n	        <div class="form-error"></div>\r\n	    </div>\r\n	    <div class="region-area">\r\n	    	\r\n	    </div>\r\n	    \r\n	    <div class="form-control clearfix">\r\n	        <label class="label" for="teacher"><i>*</i>教师姓名</label>\r\n	        <input type="text" class="form-input" name="teacher" id="teacher" placeholder="请填写教师姓名" />\r\n	        <div class="form-error"></div>\r\n	        <div class="tip-msg">请填入老师告诉你的名字</div>\r\n	    </div>\r\n	    <div class="form-control clearfix">\r\n	        <label class="label" for="telephone"><i>*</i>手机号码</label>\r\n	        <input type="text" class="form-input" name="telephone" id="telephone" placeholder="请填写手机号码" />\r\n	        <div class="form-error"></div>\r\n	        <div class="tip-msg">仅用于找回密码时使用</div>\r\n	    </div>\r\n	    <div class="form-control clearfix">\r\n	        <label class="label" for="email">邮箱</label>\r\n	        <input type="text" class="form-input" name="email" id="email" placeholder="请填写邮箱" />\r\n	        <div class="form-error"></div>\r\n	    </div>\r\n	    <div class="form-control clearfix">\r\n	       <input class="btn btn-confirm" type="submit" value="保&nbsp;&nbsp;&nbsp;&nbsp;存" />\r\n	    </div>\r\n	</form>\r\n</div>'}),define("text!root-tpl/index/teacher.tpl",[],function(){return'<div class="pop-teacher">\r\n	<form class="form teacher-form" action="">\r\n		<div class="form-control clearfix">\r\n	        <label class="label" for="realname"><i>*</i>真实姓名</label>\r\n	        <input type="text" class="form-input" name="realname" id="realname" placeholder="请填写真实姓名" />\r\n	        <div class="form-error"></div>\r\n	        <div class="tip-msg">请将该姓名告知学生，便于学生找到您</div>\r\n	    </div>\r\n	    <div class="region-area">\r\n	    	\r\n	    </div>\r\n	    \r\n	    <div class="form-control clearfix">\r\n	        <label class="label" for="code"><i>*</i>学校码</label>\r\n	        <input type="text" class="form-input" name="code" id="code" placeholder="请填写验证码" />\r\n	        <div class="form-error"></div>\r\n	    </div>\r\n	    <div class="form-control clearfix">\r\n	        <label class="label" for="telephone"><i>*</i>手机号码</label>\r\n	        <input type="text" class="form-input" name="telephone" id="telephone" placeholder="请填写手机号码" />\r\n	        <div class="form-error"></div>\r\n	        <div class="tip-msg">仅用于找回密码时使用</div>\r\n	    </div>\r\n	    <div class="form-control clearfix">\r\n	        <label class="label">是否班主任？</label>\r\n	        <label class="radio"><input type="radio" name="owner" value="0" />是</label>\r\n	        <label class="radio"><input type="radio" name="owner" value="1" />否</label>\r\n	        <div class="form-error"></div>\r\n	    </div>\r\n	    <div class="form-control clearfix">\r\n	        <label class="label" for="email">邮箱</label>\r\n	        <input type="text" class="form-input" name="email" id="email" placeholder="请填写邮箱" />\r\n	        <div class="form-error"></div>\r\n	    </div>\r\n	    <div class="form-control clearfix">\r\n	       <input class="btn btn-confirm" type="submit" value="保&nbsp;&nbsp;&nbsp;&nbsp;存" />\r\n	    </div>\r\n	</form>\r\n</div>'}),define("text!root-tpl/index/region.tpl",[],function(){return'<div class="form-control clearfix">\r\n    <label class="label" for="province"><i>*</i>省份</label>\r\n    <select class="form-select" name="province" id="province">\r\n    	<option disabled selected>请选择省份</option>\r\n    	{{~it.provinceList :v:i}}\r\n    	<option value="{{=v.code}}" \r\n        {{ if(v.code == it.province){ }}\r\n        selected\r\n        {{ } }}\r\n        >{{=v.name}}</option>\r\n    	{{~}}\r\n    </select>\r\n    <div class="form-error"></div>\r\n</div>\r\n<div class="form-control clearfix">\r\n    <label class="label" for="city"><i>*</i>城市</label>\r\n    <select class="form-select" name="city" id="city">\r\n    	<option disabled selected>请选择城市</option>\r\n        {{~it.cityList :v:i}}\r\n        <option value="{{=v.code}}" \r\n        {{ if(v.code == it.city){ }}\r\n        selected\r\n        {{ } }}\r\n        >{{=v.name}}</option>\r\n        {{~}}\r\n    </select>\r\n    <div class="form-error"></div>\r\n</div>\r\n<div class="form-control clearfix">\r\n    <label class="label" for="school"><i>*</i>学校</label>\r\n    <select class="form-select" name="school" id="school">\r\n        <option disabled selected>请选择学校</option>\r\n        {{~it.schoolList :v:i}}\r\n        <option value="{{=v.id}}" \r\n        {{ if(v.id == it.school){ }}\r\n        selected\r\n        {{ } }}\r\n        >{{=v.name}}</option>\r\n        {{~}}\r\n    </select>\r\n    <div class="form-error"></div>\r\n</div>\r\n<div class="form-control clearfix">\r\n    <label class="label" for="grade"><i>*</i>年级</label>\r\n    <select class="form-select" name="grade" id="grade">\r\n        <option disabled selected>请选择年级</option>\r\n        {{~it.gradeList :v:i}}\r\n        <option value="{{=v.code}}" \r\n        {{ if(v.code == it.grade){ }}\r\n        selected\r\n        {{ } }}\r\n        >{{=v.name}}</option>\r\n        {{~}}\r\n    </select>\r\n    <div class="form-error"></div>\r\n</div>\r\n<div class="form-control clearfix">\r\n    <label class="label" for="classroom"><i>*</i>班级</label>\r\n    <select class="form-select" name="classroom" id="classroom">\r\n        <option disabled selected>请选择班级</option>\r\n        {{~it.classList :v:i}}\r\n        <option value="{{=v.id}}">{{=v.name}}</option>\r\n        {{~}}\r\n    </select>\r\n    <div class="form-error"></div>\r\n</div>\r\n'}),define("text!root-common/module/popup.tpl",[],function(){return'<div class="ui-pop\r\n{{ if(it.className){ }} {{=it.className}}{{ } }}\r\n{{ if(it.tip){ }} ui-pop-tip{{ } }}\r\n" id="ui-pop-{{=it.id}}" name="{{=it.name}}" style="z-index:{{=it.zIndex}}">\r\n    <div class="ui-popbox">\r\n        <div class="ui-popwrap">\r\n            {{ if(it.tip){ }}\r\n            <a class="ui-popclose ui-popaction" href="javascript:;"></a>\r\n            {{ }else{ }}\r\n                {{ if(it.hasHd){ }}\r\n                <div class="ui-pophd\r\n                {{ if(!it.isMove){ }}\r\n                nomove\r\n                {{ } }}\r\n                ">\r\n                    <span class="ui-poptitle"></span>\r\n                    <a class="ui-popclose ui-popaction" href="javascript:;"></a>\r\n                    {{ if(it.isMax){ }}\r\n                    <a class="ui-popmax ui-popaction" href="javascript:;"></a>\r\n                    <a class="ui-popdefault ui-popaction" href="javascript:;"></a>\r\n                    {{ } }}\r\n                </div>\r\n                {{ } }}\r\n            {{ } }}\r\n            \r\n            <div class="ui-popmain"></div>\r\n        </div>\r\n    </div>\r\n</div>\r\n'}),define("root-common/module/popup",["text!./popup.tpl"],function(e,t,n){var r="close",i=/msie 6/i.test(window.navigator.userAgent),s={data:[],zIndex:100,number:0,config:{title:"",custom:null,fade:!1,delay:3e3,ajax:!1,url:"",iframe:null,name:"",isMax:!1,mask:!1,tip:!1,className:"",isMove:!0,hasHd:!0,containerBoderWidth:1},close:function(e){var t;if(this.data.length>0){$.each(this.data,function(n,r){r.id===e&&(t=n)});var n=this.data[t];n.container.remove(),n.opts.mask&&n.mask.remove(),this.data.splice(t,1)}return e}},o=Backbone.View.extend({initialize:function(t,n){var r=this;r._tpl=doT.template(e),r.build(t,n)},events:{"click .ui-popclose":"close","click .ui-popmax":"maximize","click .ui-popdefault":"defaultsize","mousedown .ui-pophd":"move"},build:function(e,t){var n=this;this.opts=$.extend({},s.config,e),this.id=t,this.name=this.opts.name,this.container=$(this._tpl({id:this.id,zIndex:++s.zIndex,name:this.name,isMax:this.opts.isMax,tip:this.opts.tip,className:this.opts.className,isMove:this.opts.isMove,hasHd:this.opts.hasHd})).appendTo("body"),this.opts.mask&&(this.mask=$('<div class="ui-mask" id="ui-mask-'+this.id+'"></div>').appendTo("body").css({height:$(document).height()})),this.setElement(this.container),this.iframe=null,this.wrap=$(".ui-popmain",this.container),this.closeBtn=$(".ui-popclose",this.container),this.maxBtn=$(".ui-popmax",this.container),this.defaultBtn=$(".ui-popdefault",this.container),this.iframeMask=$('<div class="ui-iframe-mask" />'),this.wrapMargin=0,this.containerBoderWidth=this.opts.containerBoderWidth,this.opts.hasHd?this.titleHeight=$(".ui-pophd",n.$el).outerHeight():this.titleHeight=0,this.show()},show:function(){var e=this;i&&this.container.css({position:"absolute"}),this.container.find(".ui-poptitle").html(this.opts.title),this._show()},_show:function(){this.opts.fade&&setTimeout($.proxy(this,"close"),this.opts.delay),this.opts.custom&&this.getCustom(),this.opts.ajax&&this.ajax(),this.opts.iframe&&this.getIframe(),this.setDefaultSize(),this.reposition(),this.container.bind("mousedown",$.proxy(this,"addZIndex"))},ajax:function(){var e=this;$.ajax({url:this.opts.url,cache:!1}).done(function(t){e.wrap.html(t),e.setDefaultSize(),e.reposition()}).error(function(){alert("error")})},setDefaultSize:function(){this.defaultWidth=this.wrap.outerWidth()+this.wrapMargin*2,this.defaultHeight=this.wrap.outerHeight()+this.wrapMargin*2},resize:function(){this.wrap.css({width:this.wrap.find(">*").outerWidth()}),this.setDefaultSize(),this.reposition()},getIframe:function(){var e=this;$(".iframe").clone().appendTo(this.wrap),this.iframe=this.wrap.find("iframe"),this.iframe.show().removeClass("iframe").attr("src",this.opts.iframe.url),this.iframe.load($.proxy(this,"iframeOnload"))},getCustom:function(){this.wrap.html(this.opts.custom)},close:function(e){e&&e.preventDefault(),s.close(this.id),this.trigger(r)},reposition:function(){var e=this.defaultHeight+this.containerBoderWidth*2;this.opts.tip||(e+=this.titleHeight),this.container.css({width:this.defaultWidth+this.containerBoderWidth*2,height:e,top:Math.max(($(window).height()-this.defaultHeight-this.titleHeight-this.containerBoderWidth*2)/2,0),left:($(window).width()-this.defaultWidth-this.containerBoderWidth*2)/2})},maximize:function(){this.container.css({top:0,left:0,width:$(window).width(),height:$(window).height()}),this.wrap.css({width:$(window).width()-this.containerBoderWidth*2-this.wrapMargin*2,height:$(window).height()-this.titleHeight-this.containerBoderWidth*2-this.wrapMargin*2}),this.opts.iframe||this.wrap.find(">*").css({width:$(window).width()-this.containerBoderWidth*2-this.wrapMargin*2,height:$(window).height()-this.titleHeight-this.containerBoderWidth*2-this.wrapMargin*2}),this.maxBtn.addClass("ui-popmax-hide"),this.defaultBtn.show()},defaultsize:function(){this.container.css({width:this.defaultWidth+this.containerBoderWidth*2,height:this.defaultHeight+this.titleHeight+this.containerBoderWidth*2}),this.wrap.css({width:this.defaultWidth-this.wrapMargin*2,height:this.defaultHeight-this.wrapMargin*2}),this.opts.iframe||this.wrap.find(">*").css({width:this.defaultWidth-this.wrapMargin*2,height:this.defaultHeight-this.wrapMargin*2}),this.reposition(),this.maxBtn.removeClass("ui-popmax-hide"),this.defaultBtn.hide()},addZIndex:function(e){$(this.container).css("z-index",++s.zIndex)},move:function(e){if(!this.opts.isMove)return;var t=this,n=e.clientY-this.container.position().top,r=e.clientX-this.container.position().left,i=$(window).width()-this.container.outerWidth(),s=$(window).height()-this.container.outerHeight(),o,u;$(document).bind("mousemove",function(e){o=e.clientY-n,u=e.clientX-r,t.container.css({left:Math.min(i,Math.max(0,u)),top:Math.min(s,Math.max(0,o))}),t._showIframeMask()}).bind("mouseup",function(){t._hideIframeMask(),$(this).unbind("mousemove")})},iframeOnload:function(){this.wrap.css({width:this.opts.iframe.width,height:this.opts.iframe.height}),this.iframe.show(),this.iframeMask.appendTo(this.wrap),this.setDefaultSize(),this.reposition(),this.iframeMask.bind("mousedown",$.proxy(this,"_hideIframeMask"))},_hideIframeMask:function(e){this.iframeMask.hide()},_showIframeMask:function(e){this.iframeMask.show()}});return{create:function(e){var t=new o(e,++s.number);return s.data.push(t),t}}}),define("root-common/util",["./module/popup","require","exports"],function(e,t,n){function r(e,t){if(!$.browser.msie)t?window.open(e,t):location.href=e;else{var n=$('<a href="'+e+'" target="'+(t||"_self")+'"> </a>')[0];document.body.appendChild(n),n.click()}}function i(e,t){return t===undefined?t=new Date:$.isNumeric(t)&&(t=new Date(parseInt(t,10))),e.replace(/([YMDhsm])\1*/g,function(e){switch(e.charAt()){case"Y":return f(t.getFullYear(),e);case"M":return f(t.getMonth()+1,e);case"D":return f(t.getDate(),e);case"w":return t.getDay()+1;case"h":return f(t.getHours(),e);case"m":return f(t.getMinutes(),e);case"s":return f(t.getSeconds(),e)}})}function s(e,t,n){$.type(t)=="date"?t=t.getTime():t=parseInt(t);var r=new Date(t),i=r.getHours();return r>432e5&&(i+=Math.floor(r/432e5)),n&&(e=e.replace(/(\w)\1+/g,"$1")),e.replace(/([hms])\1*/g,function(t){switch(t.charAt()){case"h":return f(i-8,t);case"m":var n=(/h+/.test(e)?0:i-8)*60+r.getMinutes();return f(n,t);case"s":return f(r.getSeconds(),t)}})}function u(e,t,n){$.isNumeric(e)&&(e=new Date(parseInt(e,10))),$.isNumeric(t)&&(t=new Date(parseInt(t,10))),e===undefined&&(e=new Date),t===undefined&&(t=new Date),n||(n="YYYY年MM月DD日");var r=new Date(t.toDateString()),s=(+t- +e)/1e3,u=(+t- +r)/1e3;return s<=60?"刚刚":s<=3600?Math.floor(s/60)+"分钟前":s<=u?Math.floor(s/3600)+"小时前":s<=u+o?"昨天":s<=u+o*2?"前天":s<=u+o*25?Math.floor(s/o)+"天前":i(n,e)}function a(e,t){return e<36e5?s("mm分ss秒",e,t):s("hh小时mm分ss秒",e,t)}function f(e,t){return t=t.length,e=e||0,t==1?e:(e=String(Math.pow(10,t)+e)).substr(e.length-t)}function l(e){var t=/[\?\&]([^&]+=[^&#]+)/g,n,r=[],i="",s=window.location.href;while(n=t.exec(s))r.push(n[1]);return e?($.each(r,function(t,n){if(n.indexOf(e)!==-1){var r=n.indexOf("=");return i=n.slice(r+1),!1}}),i):r}function c(t,n){return e.create({title:"提示",custom:'<i class="icon icon-error"></i>'+t,tip:!0,fade:n})}function h(t){return e.create({title:"提示",custom:'<i class="icon icon-success"></i>'+t,tip:!0,fade:!0})}function p(t,n){var r={title:"提示",custom:t,tip:!0,fade:n};return e.create(r)}function d(e,t,n){var t=t||{};try{if($.isEmptyObject(t)){if(n){var r=n.responseText,i="状态："+n.status+"， 异常信息："+n.statusText;if(r)try{r=$.parseJSON(r),i="请求地址："+r.path+"， "+i}catch(s){}c(i)}}else t.resCode=="0000"?e&&e():(e&&e(!0),t&&$.type(t)=="object"&&t[1]=="timeout"?c("网络请求慢，连接超时，请重试",!0):c(t.resMsg,!0))}catch(s){throw"ajax data error:"+s}}function v(e,t,n){var t=t||{};try{t.resCode=="0000"?e&&e():e&&e(!0)}catch(r){throw"ajax data error:"+r}}function m(e,t){var n=[],r={};return $.each(e,function(e,i){var s=t?i[t]:i;r[s]||(n.push(i),r[s]=1)}),n}function g(e,t,n){return e.slice(0,n)+t+e.slice(n)}function y(e,t,n){var r=this,i=$.extend({dataType:"json",success:function(i){r.trigger(t,i,null,e.data,n)},error:function(e,n,i){r.trigger(t,null,e)}},e);$.ajax(i)}function b(){_keyStr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",this.encode=function(e){var t="",n,r,i,s,o,u,a,f=0;e=_utf8_encode(e);while(f<e.length)n=e.charCodeAt(f++),r=e.charCodeAt(f++),i=e.charCodeAt(f++),s=n>>2,o=(n&3)<<4|r>>4,u=(r&15)<<2|i>>6,a=i&63,isNaN(r)?u=a=64:isNaN(i)&&(a=64),t=t+_keyStr.charAt(s)+_keyStr.charAt(o)+_keyStr.charAt(u)+_keyStr.charAt(a);return t},this.decode=function(e){var t="",n,r,i,s,o,u,a,f=0;e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");while(f<e.length)s=_keyStr.indexOf(e.charAt(f++)),o=_keyStr.indexOf(e.charAt(f++)),u=_keyStr.indexOf(e.charAt(f++)),a=_keyStr.indexOf(e.charAt(f++)),n=s<<2|o>>4,r=(o&15)<<4|u>>2,i=(u&3)<<6|a,t+=String.fromCharCode(n),u!=64&&(t+=String.fromCharCode(r)),a!=64&&(t+=String.fromCharCode(i));return t=_utf8_decode(t),t},_utf8_encode=function(e){e=e.replace(/\r\n/g,"\n");var t="";for(var n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t+=String.fromCharCode(r):r>127&&r<2048?(t+=String.fromCharCode(r>>6|192),t+=String.fromCharCode(r&63|128)):(t+=String.fromCharCode(r>>12|224),t+=String.fromCharCode(r>>6&63|128),t+=String.fromCharCode(r&63|128))}return t},_utf8_decode=function(e){var t="",n=0,r=c1=c2=0;while(n<e.length)r=e.charCodeAt(n),r<128?(t+=String.fromCharCode(r),n++):r>191&&r<224?(c2=e.charCodeAt(n+1),t+=String.fromCharCode((r&31)<<6|c2&63),n+=2):(c2=e.charCodeAt(n+1),c3=e.charCodeAt(n+2),t+=String.fromCharCode((r&15)<<12|(c2&63)<<6|c3&63),n+=3);return t}}var o=86400;n.openURL=r,n.formatDate=i,n.formatTime=s,n.formatNumber=f,n.formatTime=s,n.formatTimeE=a,n.release=u,n.queryString=l,n.errorTip=c,n.successTip=h,n.tip=p,n.dealAjax=d,n.insertStr=g,n.unique=m,n.request=y,n.mDealAjax=v,n.Base64=b}),define("model",["root-common/util"],function(e){var t="findProvince",n="findRegister",r="findUuid",i="findCity",s="findSchool",o="findGrade",u="findClass",a="bindUser",f="getUserInfo",l=Backbone.Model.extend({initialize:function(){},findUuid:function(t){t=$.extend({type:"get",url:window.serviceBase+"/uuid"},t),e.request.call(this,t,r)},findRegister:function(t){t=$.extend({type:"post",url:window.serviceBase+"/register"},t),e.request.call(this,t,n)},findProvince:function(n){n=$.extend({type:"get",url:window.serviceBase+"/city"},n),e.request.call(this,n,t)},findCity:function(t){t=$.extend({type:"get",url:window.serviceBase+"/city"},t),e.request.call(this,t,i)},findSchool:function(t){t=$.extend({type:"get",url:window.serviceBase+"/school"},t),e.request.call(this,t,s)},findGrade:function(t){t=$.extend({type:"get",url:window.serviceBase+"/grade"},t),e.request.call(this,t,o)},findClass:function(t){t=$.extend({type:"get",url:window.serviceBase+"/class"},t),e.request.call(this,t,u)},bindUser:function(e,t){var n=this;$.ajax({type:"post",url:window.serviceBase+"/bindUser",headers:{token:t.token},data:e,dataType:"json",success:function(r){n.trigger(a,r,null,e.data,t)},error:function(e,t,r){n.trigger(a,null,e)}})},getUserInfo:function(t,n){var r=this;$.ajax({type:"get",url:window.serviceBase+"/userInfo",headers:{authorization:"Basic "+(new e.Base64).encode(t.username+":"+t.pw)},dataType:"json",success:function(e){r.trigger(f,e,null,t.data,n)},error:function(e,t,n){r.trigger(f,null,e)}})}});return l}),define("root-common/module/cookie",[],function(){return function(e,t,n,r){typeof e=="string"&&(r=n,n=t,t=e,e=window);if(n===undefined)return n=e.document.cookie.match(new RegExp("(?:\\s|^)"+t+"\\=([^;]*)")),n?decodeURIComponent(n[1]):null;r=r||{};var i,s="";r.expires&&(r.expires.constructor==Date?i=r.expires:(i=new Date,i.setTime(i.getTime()+r.expires*24*60*60*1e3)),s="; expires="+i.toGMTString());var o=r.path?"; path="+r.path:"",u=r.domain?"; domain="+r.domain:"",a=r.secure?"; secure":"";e.document.cookie=[t,"=",encodeURIComponent(n),s,o,u,a].join("")}}),define("index",["text!root-tpl/index/main.tpl","text!root-tpl/index/role.tpl","text!root-tpl/index/student.tpl","text!root-tpl/index/teacher.tpl","text!root-tpl/index/region.tpl","root-common/module/popup","./model","root-common/util","root-common/module/cookie"],function(e,t,n,r,i,s,o,u,a){var f=Backbone.View.extend({initialize:function(){var s=this;s._tpl=doT.template(e),s._roleTpl=doT.template(t),s._studentTpl=doT.template(n),s._teacherTpl=doT.template(r),s._regionTpl=doT.template(i),s._pop=null,s._model=new o,s._model.bind({findProvince:$.proxy(s.findProvince,s),findCity:$.proxy(s.findCity,s),findSchool:$.proxy(s.findSchool,s),findGrade:$.proxy(s.findGrade,s),findClass:$.proxy(s.findClass,s),getUserInfo:$.proxy(s.getUserInfo,s),bindUser:$.proxy(s.bindUser,s)}),s._token=a("tsw_token")||null,s._username="",s.resetVars()},events:{"click .btn-register":"_register","click .ui-nav-item":"_showrol","click .btn-tip, .panel-tip":"_showTip","click .btn-login":"_login"},init:function(){var e=this;e.render()},render:function(){var e=this;e.$el.html(e._tpl({}))},reset:function(){var e=this;e.$el.html(""),e._pop.close(),e._pop=null,e.resetVars()},resetVars:function(){var e=this;e._provinceList=[],e._province="",e._cityList=[],e._city="",e._schoolList=[],e._school="",e._gradeList=[],e._grade="",e._classList=[],e._isStudent=!1},_register:function(e){e.preventDefault,this.register()},_showrol:function(e){var t=$(e.target).index();$(".ui-nav-item").removeClass("ui-item-current").eq(t).addClass("ui-item-current"),$(".ui-panel-item").hide().eq(t).show()},register:function(){window.location.href="#login"},bindRole:function(){var e=this;e._pop=s.create({title:"老师or学生?",custom:e._roleTpl({}),mask:!0,isMove:!1})},updateStudent:function(){var e=this;e._pop=s.create({title:"我是学生",custom:e._studentTpl({}),mask:!0,isMove:!1}),e._isStudent=!0,e._model.findProvince(),e.renderRegion(),e.bindRegion(),$(".form",e._pop.$el).submit($.proxy(e._validate,e))},updateTeacher:function(){var e=this;e._pop=s.create({title:"我是老师",custom:e._teacherTpl({}),mask:!0,isMove:!1}),e._isStudent=!1,e._model.findProvince(),e.renderRegion(),e.bindRegion(),$(".form",e._pop.$el).submit($.proxy(e._validate,e))},bindRegion:function(){var e=this;e._pop.$el.on("change",'select[name="province"]',$.proxy(e._changeProvince,e)),e._pop.$el.on("change",'select[name="city"]',$.proxy(e._changeCity,e)),e._pop.$el.on("change",'select[name="school"]',$.proxy(e._changeSchool,e)),e._pop.$el.on("change",'select[name="grade"]',$.proxy(e._changeGrade,e))},renderRegion:function(){var e=this;$(".region-area",e._pop.$el).html(e._regionTpl({provinceList:e._provinceList,province:e._province,cityList:e._cityList,city:e._city,schoolList:e._schoolList,school:e._school,gradeList:e._gradeList,grade:e._grade,classList:e._classList}))},_validate:function(e){var t=this,n=t.validate($(e.currentTarget)).form();if(n){var r=$('input[name="email"]',t._pop.$el).val();if(r&&!/^([\w-]+)@([\w-]+).([\w-]+)$/.test(r))return u.errorTip("邮箱格式不正确"),!1;var i={schoolId:t._school,classId:$('select[name="classroom"]',t._pop.$el).val(),realname:$('input[name="realname"]',t._pop.$el).val(),studentOrTeacher:t._isStudent?"student":"teacher",mobile:$('input[name="telephone"]',t._pop.$el).val(),email:r};t._isStudent?i.teacherName=$('input[name="teacher"]',t._pop.$el).val():(i.isMaster=!!parseInt($('input[name="owner"]',t._pop.$el).val()),i.inputCheckClassCode=$('input[name="code"]',t._pop.$el).val()),t._model.bindUser(i,{token:t._token})}return!1},validate:function(e){var t=this;return e.validate({errorElement:"span",errorPlacement:function(e,t){e.prepend(""),e.appendTo(t.parent().find(".form-error"))},rules:{province:{required:!0},city:{required:!0},school:{required:!0},grade:{required:!0},classroom:{required:!0},realname:{required:!0,maxlength:30},teacher:{required:!0},telephone:{required:!0,isTelephone:!0}},messages:{province:{required:"请选择省份"},city:{required:"请选择城市"},school:{required:"请选择学校"},grade:{required:"请选择年级"},classroom:{required:"请选择班级"},realname:{required:"姓名不能为空",maxlength:"最大不能超过30个字符"},teacher:{required:"教师姓名不能为空"},telephone:{required:"手机不能为空",isTelephone:"手机格式不对"}}})},_showTip:function(e){e.preventDefault(),e.stopPropagation(),$(".panel-tip",this.$el).show()},findProvince:function(e,t,n,r){var i=this;u.dealAjax(function(t){i._provinceList=e.data.list,i.renderRegion()},e,t)},findCity:function(e,t,n,r){var i=this;u.dealAjax(function(t){i._cityList=e.data.list,i.renderRegion()},e,t)},findSchool:function(e,t,n,r){var i=this;u.dealAjax(function(t){i._schoolList=e.data.list,i.renderRegion()},e,t)},findGrade:function(e,t,n,r){var i=this;u.dealAjax(function(t){i._gradeList=e.data.list,i.renderRegion()},e,t)},findClass:function(e,t,n,r){var i=this;u.dealAjax(function(t){i._classList=e.data.list,i.renderRegion()},e,t)},getUserInfo:function(e,t,n,r){var i=this;u.dealAjax(function(t){var n=e.data;t||(i._token=n.token,a("tsw_token",i._token),i._username=n.userBasic.loginName,n.bindStatus?i.goProduct():i.bindRole())},e,t)},bindUser:function(e,t,n,r){var i=this;u.dealAjax(function(e){e||i.goProduct()},e,t)},goProduct:function(e){var t=$('<form method="post" action="'+window.oldServiceBase+'/LoginAction.action?method=loginFromLyMis"><input type="hidden" value="'+this._username+'" name="username"><input type="hidden" value="2" name="source"></form>');t.submit()},_changeProvince:function(e){e.preventDefault();var t=this,n=$(e.currentTarget).val();t._province=n,t._cityList=[],t._city="",t._schoolList=[],t._school="",t._gradeList=[],t._grade="",t._classList=[],t._model.findCity({data:{code:n}})},_changeCity:function(e){e.preventDefault();var t=this,n=$(e.currentTarget).val();t._city=n,t._schoolList=[],t._school="",t._gradeList=[],t._grade="",t._classList=[],t._model.findSchool({data:{cityCode:n}})},_changeSchool:function(e){e.preventDefault();var t=this,n=$(e.currentTarget).val();t._school=n,t._gradeList=[],t._grade="",t._classList=[],t._model.findGrade({data:{schoolId:n}})},_changeGrade:function(e){e.preventDefault();var t=this,n=$(e.currentTarget).val();t._grade=n,t._classList=[],t._model.findClass({data:{schoolId:t._school,grade:n}})},_login:function(e){e.preventDefault();var t=this;t._model.getUserInfo({username:$('.ui-login input[name="name"]',t.$el).val(),pw:$('.ui-login input[name="password"]',t.$el).val()})}});return f}),define("text!root-tpl/login/main.tpl",[],function(){return'<div class="pop-login">\r\n	<form class="form signup-form" action="">\r\n		<div class="form-control clearfix">\r\n	        <label class="label" for="loginName">创建用户</label>\r\n	        <input type="text" class="form-input" name="loginName" id="loginName" placeholder="请输入账号" />\r\n	        <div class="form-error"></div>\r\n	    </div>\r\n	    <div class="form-control clearfix">\r\n	        <label class="label" for="pw">输入密码</label>\r\n	        <input type="password" class="form-input input-pw" name="pw" id="pw" placeholder="请输入密码" />\r\n	        <div class="form-error"></div>\r\n	    </div>\r\n	    <div class="form-control clearfix">\r\n	        <label class="label" for="cpw">确认密码</label>\r\n	        <input type="password" class="form-input" name="cpw" id="cpw" placeholder="确认密码" />\r\n	        <div class="form-error"></div>\r\n	    </div>\r\n	    <div class="form-control clearfix">\r\n	        <label class="label" for="inputCode">验证码</label>\r\n	        <input type="text" class="form-input form-input-code" name="inputCode" id="inputCode" />\r\n	        <img src="" class="validate-code" />\r\n	        <div class="form-error"></div>\r\n	    </div>\r\n	    <div class="form-control clearfix">\r\n	       <input class="btn btn-confirm" type="submit" value="确&nbsp;&nbsp;&nbsp;&nbsp;认" />\r\n	    </div>\r\n	</form>\r\n</div>'}),define("text!root-tpl/login/main-bg.tpl",[],function(){return'<div class="log-header"></div>\r\n<div class="log-bottom"></div>'}),define("login",["root-common/module/popup","text!root-tpl/login/main.tpl","text!root-tpl/login/main-bg.tpl","./model","root-common/util"],function(e,t,n,r,i){var s="after.signup",o='<i class="icon-solid">&#xe901;</i>',u=Backbone.View.extend({initialize:function(){var e=this;e._tpl=doT.template(t),e._Btpl=doT.template(n),e._pop=null,e._model=new r,e.uuid="",e._model.bind({findRegister:$.proxy(e.findRegister,e),findUuid:$.proxy(e.findUuid,e)})},events:{},render:function(){var e=this;e.$el.html(e._Btpl({}))},init:function(t){var n=this;n.render(),n._pop=e.create({title:'<i class="logo-login"></i><i class="seperator"></i>账号注册',custom:n._tpl({}),mask:!0,isMove:!1}),n._model.findUuid(),$(".signup-form",n._pop.$el).submit($.proxy(n._validate,n)).submit(),$(".validate-code").click(function(){$(".validate-code").attr("src",window.serviceBase+"/getSecurityCode?uuid="+n.uuid+"&t="+ +(new Date))})},reset:function(){var e=this;e._pop.close(),e._pop=null,e.$el.html("")},_validate:function(e){var t=this,n=this.validate($(e.currentTarget)).form();return e.preventDefault(),n&&t.findRegister(),!1},validate:function(e){var t=this;return e.validate({errorElement:"span",errorPlacement:function(e,t){e.prepend(""),e.appendTo(t.parent().find(".form-error"))},rules:{loginName:{required:!0,isUsername:!0,remote:{url:window.serviceBase+"/checkLoginName",data:{loginName:function(){return $("#loginName").val()}},dataType:"json"}},pw:{required:!0,ispw:!0},cpw:{required:!0,isCpw:!0},inputCode:{required:!0,remote:{url:window.serviceBase+"/checkSecurityCode",data:{uuid:function(){return t.uuid},inputCode:function(){return $("#inputCode").val()}},dataType:"json"}}},messages:{loginName:{required:"用户名不能为空",isUsername:'英文字母开头的2~20个小写英文、数字或"_"的组合',remote:"用户已经存在"},pw:{required:"密码不能为空",ispw:'6~20位小写英文、数字或"_"的组合'},cpw:{required:"确认密码不能为空",isCpw:"两次输入不一致"},inputCode:{required:"验证码不能为空",remote:"验证码不正确"}}})},findRegister:function(e,t,n,r){var s=this,e={loginName:$("#loginName").val(),password:$("#pw").val(),inputCode:$("#inputCode").val(),uuid:s.uuid,agentCode:10001};$.ajax({url:window.serviceBase+"/register?uuid="+s.uuid+"&t="+ +(new Date),type:"post",data:e,success:function(e){i.tip("注册成功，即将为您跳转到登录页",!0),setTimeout(function(){window.location.href="#"},2e3)}})},_findRegister:function(e){this._model.findRegister({data:e})},findUuid:function(e,t,n,r){var i=this;$.ajax({url:window.serviceBase+"/uuid",type:"get",success:function(e){i.uuid=e,$(".validate-code").attr("src",window.serviceBase+"/getSecurityCode?uuid="+i.uuid+"&t="+ +(new Date))}})}});return u}),define("auto-domain",[],function(){var e="online",t=location.hostname,n="192.168.12.250",r="8088",i="http://",s=/192.168|localhost|debug.|127.0/;s.test(t)&&(e="test"),/139.196/g.test(t)&&(e="aliyun");try{e=="test"?(window.serviceBase=i+n+":"+r,window.oldServiceBase=i+n+":8080"):e=="aliyun"?(window.serviceBase="http://www.17english.com/taoshiwanApi",window.oldServiceBase="http://www.17english.com"):(window.serviceBase=i+t+"/taoshiwanApi",window.oldServiceBase=i+t)}catch(o){alert("自适应域名脚本执行错误!\n")}}),require(["./router","./moduleManager","./index","./login","./auto-domain"],function(e,t,n,r){function u(){t.clear()}$.validator.addMethod("isCpw",function(e,t,n){var r=$(t).closest("form"),i=$(t).val(),s=$(".input-pw",r).val();return i===s}),$.validator.addMethod("isUsername",function(e,t,n){var r=/^[a-z]{1}[a-z0-9_]{1,19}$/g;return r.test($(t).val())}),$.validator.addMethod("ispw",function(e,t,n){var r=/^[a-z0-9_]{6,20}$/g;return r.test($(t).val())}),$.validator.addMethod("isEmail",function(e,t,n){var r=/^([\w-]+)@([\w-]+).([\w-]+)$/,i=$(t).val();return r.test(i)}),$.validator.addMethod("isTelephone",function(e,t,n){var r=/^(13[0-9]|15[012356789]|17[678]|18[0-9]|14[57])[0-9]{8}$/,i=$(t).val();return r.test(i)});var i=new e,s=t.add(new n({el:"#IndexPage"})),o=t.add(new r({el:"#LoginPage"}));i.bind({gotoHome:function(){u(),s.init()},gotoLogin:function(){u(),o.init()},gotoRole:function(){u(),s.init(),s.bindRole()},gotoStudent:function(){u(),s.init(),s.updateStudent()},gotoTeacher:function(){u(),s.init(),s.updateTeacher()}}),$("body").click(function(){$(".panel-tip").hide()}),Backbone.history.start()}),define("main",function(){});