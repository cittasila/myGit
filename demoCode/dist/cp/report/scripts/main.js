define("router",[],function(){var e="gotoHome",t="gotoReport",n=Backbone.Router.extend({routes:{"":"gotoHome","report/:id/:id":"gotoReport","writingDetail/:id/:id":"gotoWritingDetail","compositionAbility/:id/:id":"gotoCompositionAbility","skillAnalyze/:id/:id":"gotoSkillAnalyze","writingLevel/:id/:id":"gotoWritingLevel","errorSummary/:id/:id":"gotoErrorSummary","systemComment/:id/:id":"gotoSystemComment"},initialize:function(){},gotoHome:function(){this.trigger(e)},gotoReport:function(e,n,r){this.trigger(t,e,n,r)},gotoWritingDetail:function(e,t){this.gotoReport(e,t,"writingDetail")},gotoCompositionAbility:function(e,t){this.gotoReport(e,t,"compositionAbility")},gotoSkillAnalyze:function(e,t){this.gotoReport(e,t,"skillAnalyze")},gotoWritingLevel:function(e,t){this.gotoReport(e,t,"writingLevel")},gotoErrorSummary:function(e,t){this.gotoReport(e,t,"errorSummary")},gotoSystemComment:function(e,t){this.gotoReport(e,t,"systemComment")}});return n}),define("moduleManager",[],function(){var e={_modules:[],add:function(e){return this._modules.push(e),e},clear:function(){$.each(this._modules,function(e,t){try{t.reset()}catch(n){}})}};return _.extend(e,Backbone.Events),e}),define("text",{load:function(e){throw new Error("Dynamic load not allowed: "+e)}}),define("text!root-tpl/index.tpl",[],function(){return'<div class="bg"></div>'}),define("text!root-tpl/validation.tpl",[],function(){return'<div class="ui-phone">\n    <div class="hd"></div>\n    <div class="main">\n        <form class="form form-validate-phone fix" action="">\n            <div class="form-control fix">\n                <div class="fix">\n                    <label class="label" for="phone">用户名</label>\n                    <input type="text" class="form-input" name="name" placeholder="请输入账号" />\n                </div>\n                \n                <div class="form-error"></div>\n            </div>\n            <div class="form-control fix">\n                <div class="fix">\n                    <label class="label" for="phone">手机号</label>\n                    <input type="text" class="form-input" name="phone" placeholder="请输入您的手机号" />\n                </div>\n                \n                <div class="form-error"></div>\n            </div>\n            <div class="form-control fix">\n                <div class="fix">\n                    <label class="label" for="code">验证码</label>\n                    <input type="text" class="form-input" name="code" placeholder="请输入验证码" />\n                    <span class="img-code"></span>\n                    <i class="icon-solid icon-loop">&#xe90f;</i>\n                </div>\n                \n                <div class="form-error"></div>\n            </div>\n            <div class="form-control fix">\n                <div class="fix">\n                    <label class="label" for="dynamicCode">动态码</label>\n                    <input type="text" class="form-input" name="dynamicCode" placeholder="输入动态码" />\n                    <a href="javascript:;" class="btn-sendcode">\n                        <i class="send">获取动态码</i>\n                        <i class="nosend">\n                            <i class="num"></i>秒后请重试\n                        </i>\n                    </a>\n                </div>\n                \n                <div class="form-error"></div>\n            </div>\n            <div class="form-control clearfix">\n               <button type="submit" class="btn btn-confirm">查&nbsp;&nbsp;&nbsp;&nbsp;询</button>\n            </div>\n        </form>\n    </div>\n</div>\n'}),define("text!root-tpl/result-list.tpl",[],function(){return'<div class="result-list">\n	{{ if(it.list.length){ }}\n	<h4>这位同学在本次好作文大赛中共写了 {{=it.list.length}} 篇作文，请点击查看</h4>\n	<ul>\n		{{~it.list :v:i}}\n		<li>\n			<a href="#report/{{=it.token}}/{{=v.assignmentId}}">\n				<span class="txt">{{=i+1}}. {{=v.essaySetTitle}}</span>\n				<span class="btn-view">查看报告</span>\n			</a>\n		</li>\n		{{~}}\n	</ul>	\n	{{ }else{ }}\n	<h4>这位同学在本次好作文大赛中共写了 0 篇作文</h4>\n	{{ } }}\n	\n</div>'}),define("text!root-common/module/popup.tpl",[],function(){return'<div class="ui-pop\r\n{{ if(it.className){ }} {{=it.className}}{{ } }}\r\n{{ if(it.tip){ }} ui-pop-tip{{ } }}\r\n" id="ui-pop-{{=it.id}}" name="{{=it.name}}" style="z-index:{{=it.zIndex}}">\r\n    <div class="ui-popbox">\r\n        <div class="ui-popwrap">\r\n            {{ if(it.tip){ }}\r\n            <a class="ui-popclose ui-popaction" href="javascript:;"></a>\r\n            {{ }else{ }}\r\n                {{ if(it.hasHd){ }}\r\n                <div class="ui-pophd\r\n                {{ if(!it.isMove){ }}\r\n                nomove\r\n                {{ } }}\r\n                ">\r\n                    <span class="ui-poptitle"></span>\r\n                    <a class="ui-popclose ui-popaction" href="javascript:;"></a>\r\n                    {{ if(it.isMax){ }}\r\n                    <a class="ui-popmax ui-popaction" href="javascript:;"></a>\r\n                    <a class="ui-popdefault ui-popaction" href="javascript:;"></a>\r\n                    {{ } }}\r\n                </div>\r\n                {{ } }}\r\n            {{ } }}\r\n            \r\n            <div class="ui-popmain"></div>\r\n        </div>\r\n    </div>\r\n</div>\r\n'}),define("root-common/module/popup",["text!./popup.tpl"],function(e,t,n){var r="close",i=/msie 6/i.test(window.navigator.userAgent),s={data:[],zIndex:100,number:0,config:{title:"",custom:null,fade:!1,delay:3e3,ajax:!1,url:"",iframe:null,name:"",isMax:!1,mask:!1,tip:!1,className:"",isMove:!0,hasHd:!0,containerBoderWidth:1},close:function(e){var t;if(this.data.length>0){$.each(this.data,function(n,r){r.id===e&&(t=n)});var n=this.data[t];n.container.remove(),n.opts.mask&&n.mask.remove(),this.data.splice(t,1)}return e}},o=Backbone.View.extend({initialize:function(t,n){var r=this;r._tpl=doT.template(e),r.build(t,n)},events:{"click .ui-popclose":"close","click .ui-popmax":"maximize","click .ui-popdefault":"defaultsize","mousedown .ui-pophd":"move"},build:function(e,t){var n=this;this.opts=$.extend({},s.config,e),this.id=t,this.name=this.opts.name,this.container=$(this._tpl({id:this.id,zIndex:++s.zIndex,name:this.name,isMax:this.opts.isMax,tip:this.opts.tip,className:this.opts.className,isMove:this.opts.isMove,hasHd:this.opts.hasHd})).appendTo("body"),this.opts.mask&&(this.mask=$('<div class="ui-mask" id="ui-mask-'+this.id+'"></div>').appendTo("body").css({height:$(document).height()})),this.setElement(this.container),this.iframe=null,this.wrap=$(".ui-popmain",this.container),this.closeBtn=$(".ui-popclose",this.container),this.maxBtn=$(".ui-popmax",this.container),this.defaultBtn=$(".ui-popdefault",this.container),this.iframeMask=$('<div class="ui-iframe-mask" />'),this.wrapMargin=0,this.containerBoderWidth=this.opts.containerBoderWidth,this.opts.hasHd?this.titleHeight=$(".ui-pophd",n.$el).outerHeight():this.titleHeight=0,this.show()},show:function(){var e=this;i&&this.container.css({position:"absolute"}),this.container.find(".ui-poptitle").html(this.opts.title),this._show()},_show:function(){this.opts.fade&&setTimeout($.proxy(this,"close"),this.opts.delay),this.opts.custom&&this.getCustom(),this.opts.ajax&&this.ajax(),this.opts.iframe&&this.getIframe(),this.setDefaultSize(),this.reposition(),this.container.bind("mousedown",$.proxy(this,"addZIndex"))},ajax:function(){var e=this;$.ajax({url:this.opts.url,cache:!1}).done(function(t){e.wrap.html(t),e.setDefaultSize(),e.reposition()}).error(function(){alert("error")})},setDefaultSize:function(){this.defaultWidth=this.wrap.outerWidth()+this.wrapMargin*2,this.defaultHeight=this.wrap.outerHeight()+this.wrapMargin*2},resize:function(){this.wrap.css({width:this.wrap.find(">*").outerWidth()}),this.setDefaultSize(),this.reposition()},getIframe:function(){var e=this;$(".iframe").clone().appendTo(this.wrap),this.iframe=this.wrap.find("iframe"),this.iframe.show().removeClass("iframe").attr("src",this.opts.iframe.url),this.iframe.load($.proxy(this,"iframeOnload"))},getCustom:function(){this.wrap.html(this.opts.custom)},close:function(e){e&&e.preventDefault(),s.close(this.id),this.trigger(r)},reposition:function(){var e=this.defaultHeight+this.containerBoderWidth*2;this.opts.tip||(e+=this.titleHeight),this.container.css({width:this.defaultWidth+this.containerBoderWidth*2,height:e,top:Math.max(($(window).height()-this.defaultHeight-this.titleHeight-this.containerBoderWidth*2)/2,0),left:($(window).width()-this.defaultWidth-this.containerBoderWidth*2)/2})},maximize:function(){this.container.css({top:0,left:0,width:$(window).width(),height:$(window).height()}),this.wrap.css({width:$(window).width()-this.containerBoderWidth*2-this.wrapMargin*2,height:$(window).height()-this.titleHeight-this.containerBoderWidth*2-this.wrapMargin*2}),this.opts.iframe||this.wrap.find(">*").css({width:$(window).width()-this.containerBoderWidth*2-this.wrapMargin*2,height:$(window).height()-this.titleHeight-this.containerBoderWidth*2-this.wrapMargin*2}),this.maxBtn.addClass("ui-popmax-hide"),this.defaultBtn.show()},defaultsize:function(){this.container.css({width:this.defaultWidth+this.containerBoderWidth*2,height:this.defaultHeight+this.titleHeight+this.containerBoderWidth*2}),this.wrap.css({width:this.defaultWidth-this.wrapMargin*2,height:this.defaultHeight-this.wrapMargin*2}),this.opts.iframe||this.wrap.find(">*").css({width:this.defaultWidth-this.wrapMargin*2,height:this.defaultHeight-this.wrapMargin*2}),this.reposition(),this.maxBtn.removeClass("ui-popmax-hide"),this.defaultBtn.hide()},addZIndex:function(e){$(this.container).css("z-index",++s.zIndex)},move:function(e){if(!this.opts.isMove)return;var t=this,n=e.clientY-this.container.position().top,r=e.clientX-this.container.position().left,i=$(window).width()-this.container.outerWidth(),s=$(window).height()-this.container.outerHeight(),o,u;$(document).bind("mousemove",function(e){o=e.clientY-n,u=e.clientX-r,t.container.css({left:Math.min(i,Math.max(0,u)),top:Math.min(s,Math.max(0,o))}),t._showIframeMask()}).bind("mouseup",function(){t._hideIframeMask(),$(this).unbind("mousemove")})},iframeOnload:function(){this.wrap.css({width:this.opts.iframe.width,height:this.opts.iframe.height}),this.iframe.show(),this.iframeMask.appendTo(this.wrap),this.setDefaultSize(),this.reposition(),this.iframeMask.bind("mousedown",$.proxy(this,"_hideIframeMask"))},_hideIframeMask:function(e){this.iframeMask.hide()},_showIframeMask:function(e){this.iframeMask.show()}});return{create:function(e){var t=new o(e,++s.number);return s.data.push(t),t}}}),define("root-common/util",["./module/popup","require","exports"],function(e,t,n){function r(e,t){if(!$.browser.msie)t?window.open(e,t):location.href=e;else{var n=$('<a href="'+e+'" target="'+(t||"_self")+'"> </a>')[0];document.body.appendChild(n),n.click()}}function i(e,t){return t===undefined?t=new Date:$.isNumeric(t)&&(t=new Date(parseInt(t,10))),e.replace(/([YMDhsm])\1*/g,function(e){switch(e.charAt()){case"Y":return f(t.getFullYear(),e);case"M":return f(t.getMonth()+1,e);case"D":return f(t.getDate(),e);case"w":return t.getDay()+1;case"h":return f(t.getHours(),e);case"m":return f(t.getMinutes(),e);case"s":return f(t.getSeconds(),e)}})}function s(e,t,n){$.type(t)=="date"?t=t.getTime():t=parseInt(t);var r=new Date(t),i=r.getHours();return r>432e5&&(i+=Math.floor(r/432e5)),n&&(e=e.replace(/(\w)\1+/g,"$1")),e.replace(/([hms])\1*/g,function(t){switch(t.charAt()){case"h":return f(i-8,t);case"m":var n=(/h+/.test(e)?0:i-8)*60+r.getMinutes();return f(n,t);case"s":return f(r.getSeconds(),t)}})}function u(e,t,n){$.isNumeric(e)&&(e=new Date(parseInt(e,10))),$.isNumeric(t)&&(t=new Date(parseInt(t,10))),e===undefined&&(e=new Date),t===undefined&&(t=new Date),n||(n="YYYY年MM月DD日");var r=new Date(t.toDateString()),s=(+t- +e)/1e3,u=(+t- +r)/1e3;return s<=60?"刚刚":s<=3600?Math.floor(s/60)+"分钟前":s<=u?Math.floor(s/3600)+"小时前":s<=u+o?"昨天":s<=u+o*2?"前天":s<=u+o*25?Math.floor(s/o)+"天前":i(n,e)}function a(e,t){return e<36e5?s("mm分ss秒",e,t):s("hh小时mm分ss秒",e,t)}function f(e,t){return t=t.length,e=e||0,t==1?e:(e=String(Math.pow(10,t)+e)).substr(e.length-t)}function l(e){var t=/[\?\&]([^&]+=[^&#]+)/g,n,r=[],i="",s=window.location.href;while(n=t.exec(s))r.push(n[1]);return e?($.each(r,function(t,n){if(n.indexOf(e)!==-1){var r=n.indexOf("=");return i=n.slice(r+1),!1}}),i):r}function c(t,n){return e.create({title:"提示",custom:'<i class="icon icon-error"></i>'+t,tip:!0,fade:n})}function h(t){return e.create({title:"提示",custom:'<i class="icon icon-success"></i>'+t,tip:!0,fade:!0})}function p(t,n){var r={title:"提示",custom:t,tip:!0,fade:n};return e.create(r)}function d(e,t,n){var t=t||{};try{if($.isEmptyObject(t)){if(n){var r=n.responseText,i="状态："+n.status+"， 异常信息："+n.statusText;if(r)try{r=$.parseJSON(r),i="请求地址："+r.path+"， "+i}catch(s){}c(i)}}else t.resCode=="0000"?e&&e():(e&&e(!0),t&&$.type(t)=="object"&&t[1]=="timeout"?c("网络请求慢，连接超时，请重试",!0):c(t.resMsg,!0))}catch(s){throw"ajax data error:"+s}}function v(e,t,n){var t=t||{};try{t.resCode=="0000"?e&&e():e&&e(!0)}catch(r){throw"ajax data error:"+r}}function m(e,t){var n=[],r={};return $.each(e,function(e,i){var s=t?i[t]:i;r[s]||(n.push(i),r[s]=1)}),n}function g(e,t,n){return e.slice(0,n)+t+e.slice(n)}function y(e,t,n){var r=this,i=$.extend({dataType:"json",success:function(i){r.trigger(t,i,null,e.data,n)},error:function(e,n,i){r.trigger(t,null,e)}},e);$.ajax(i)}function b(){_keyStr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",this.encode=function(e){var t="",n,r,i,s,o,u,a,f=0;e=_utf8_encode(e);while(f<e.length)n=e.charCodeAt(f++),r=e.charCodeAt(f++),i=e.charCodeAt(f++),s=n>>2,o=(n&3)<<4|r>>4,u=(r&15)<<2|i>>6,a=i&63,isNaN(r)?u=a=64:isNaN(i)&&(a=64),t=t+_keyStr.charAt(s)+_keyStr.charAt(o)+_keyStr.charAt(u)+_keyStr.charAt(a);return t},this.decode=function(e){var t="",n,r,i,s,o,u,a,f=0;e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");while(f<e.length)s=_keyStr.indexOf(e.charAt(f++)),o=_keyStr.indexOf(e.charAt(f++)),u=_keyStr.indexOf(e.charAt(f++)),a=_keyStr.indexOf(e.charAt(f++)),n=s<<2|o>>4,r=(o&15)<<4|u>>2,i=(u&3)<<6|a,t+=String.fromCharCode(n),u!=64&&(t+=String.fromCharCode(r)),a!=64&&(t+=String.fromCharCode(i));return t=_utf8_decode(t),t},_utf8_encode=function(e){e=e.replace(/\r\n/g,"\n");var t="";for(var n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t+=String.fromCharCode(r):r>127&&r<2048?(t+=String.fromCharCode(r>>6|192),t+=String.fromCharCode(r&63|128)):(t+=String.fromCharCode(r>>12|224),t+=String.fromCharCode(r>>6&63|128),t+=String.fromCharCode(r&63|128))}return t},_utf8_decode=function(e){var t="",n=0,r=c1=c2=0;while(n<e.length)r=e.charCodeAt(n),r<128?(t+=String.fromCharCode(r),n++):r>191&&r<224?(c2=e.charCodeAt(n+1),t+=String.fromCharCode((r&31)<<6|c2&63),n+=2):(c2=e.charCodeAt(n+1),c3=e.charCodeAt(n+2),t+=String.fromCharCode((r&15)<<12|(c2&63)<<6|c3&63),n+=3);return t}}var o=86400;n.openURL=r,n.formatDate=i,n.formatTime=s,n.formatNumber=f,n.formatTime=s,n.formatTimeE=a,n.release=u,n.queryString=l,n.errorTip=c,n.successTip=h,n.tip=p,n.dealAjax=d,n.insertStr=g,n.unique=m,n.request=y,n.mDealAjax=v,n.Base64=b}),define("model",["root-common/util"],function(e){var t="find.report",n=Backbone.Model.extend({initialize:function(){},findReport:function(n){var r={url:window.serviceBase+"/hzwReport/report",data:n.data,headers:{token:n.token}};e.request.call(this,r,t)}});return n}),define("text!root-common/module/phone-check/main.tpl",[],function(){return'<div class="ui-phone">\n	<div class="hd"></div>\n	<div class="main">\n		<form class="form form-validate-phone fix" action="">\n			<div class="form-control fix">\n				<div class="input-group fix">\n					<div class="clearfix bshadow0 pbs">\n						<span class="icon-user icon-solid icon">\n		                	&#xe90c;\n		                </span>\n		            </div>\n			        <input type="text" class="form-input" name="phone" placeholder="请输入手机号码" />\n				</div>\n				\n		        <div class="form-error"></div>\n		    </div>\n		    <div class="form-control fix">\n		    	<div class="input-group fix">\n					<div class="clearfix bshadow0 pbs">\n						<span class="icon-lock icon-solid icon">\n		            		&#xe90a;\n		                </span>\n		            </div>\n			        <input type="text" class="form-input" name="code" placeholder="输入验证码" />\n				</div>\n				<span class="img-code"></span>\n				<i class="icon-solid icon-loop">&#xe90f;</i>\n		        <div class="form-error"></div>\n		    </div>\n		    <div class="form-control fix">\n		    	<div class="input-group fix">\n					<div class="clearfix bshadow0 pbs">\n						<span class="icon-lock icon-solid icon">\n		            		&#xe911;\n		                </span>\n		            </div>\n			        <input type="text" class="form-input" name="dynamicCode" placeholder="输入动态码" />\n				</div>\n				<a href="javascript:;" class="btn-sendcode">\n					<i class="send">获取动态码</i>\n					<i class="nosend">\n						<i class="num"></i>秒后请重试\n					</i>\n				</a>\n		        <div class="form-error"></div>\n		    </div>\n		  	<div class="action"></div>\n		</form>\n	</div>\n</div>'}),define("root-common/module/cookie",[],function(){return function(e,t,n,r){typeof e=="string"&&(r=n,n=t,t=e,e=window);if(n===undefined)return n=e.document.cookie.match(new RegExp("(?:\\s|^)"+t+"\\=([^;]*)")),n?decodeURIComponent(n[1]):null;r=r||{};var i,s="";r.expires&&(r.expires.constructor==Date?i=r.expires:(i=new Date,i.setTime(i.getTime()+r.expires*24*60*60*1e3)),s="; expires="+i.toGMTString());var o=r.path?"; path="+r.path:"",u=r.domain?"; domain="+r.domain:"",a=r.secure?"; secure":"";e.document.cookie=[t,"=",encodeURIComponent(n),s,o,u,a].join("")}}),define("root-common/module/phone-check/model",["../../util","../../module/cookie"],function(e,t){function u(t,n,r,i){var o=this,u=$.extend({url:t.url,headers:{},data:t.data,dataType:"json",success:function(u){u.status==401?(e.tip(u.resDesc,3e3),o.trigger(s)):(o.trigger(r,u,null,t.data,n),i&&i(u))},error:function(e,t,n){o.trigger(r,null,e)}},t);this.token&&(u.headers.token=this.token),$.ajax(u)}var n="sendMsg",r="verMsg",i="getUuid",s="notoken",o="getCode",a=Backbone.Model.extend({initialize:function(e){this.baseUrl=e.baseUrl,this.token=e.token},sendMsg:function(e,t){var r=this;e=e||{},e.url=this.baseUrl+"/common/sendMsg",u.call(this,e,t,n)},verMsg:function(e,t){var n=this;e=e||{},e.url=this.baseUrl+"/common/verMsg",u.call(this,e,t,r)},getUuid:function(e,t){var n=this;e=e||{},e.type="get",e.dataType="text",e.url=this.baseUrl+"/common/uuid",u.call(this,e,t,i)},getSecurityCode:function(e,t){var n=this;e=e||{},e.url=this.baseUrl+"/common/getSecurityCode",u.call(this,e,t,o)}});return a}),define("root-common/module/phone-check/main",["text!./main.tpl","../../util","../../module/popup","./model","../../module/cookie"],function(e,t,n,r,i){var s="afterVer",o="validate",u=Backbone.View.extend({initialize:function(t){var n=this;n._tpl=doT.template(t.tpl||e),n._model=new r(t),n._type=t.type,n._isSending=!1,n._sendTimer=null,n._uuid=null,n._hasName=t.hasName,n._getUuid(),n._model.bind({verMsg:$.proxy(n.verMsg,n),sendMsg:$.proxy(n.sendMsg,n),getUuid:$.proxy(n.getUuid,n)}),n.render()},events:{"submit .form-validate-phone":"_validate","click .btn-sendcode":"_sendPhone","click .icon-loop":"_getUuid"},render:function(e){var t=this;t.$el.html(t._tpl({}))},reset:function(){this._sendTimer&&clearInterval(this._sendTimer),this._isSending=!1,this._uuid=null},_getUuid:function(){this._model.getUuid()},_validate:function(e){var t=this,n=this.validate($(e.currentTarget)).form();t.trigger(o),e.preventDefault();if(n){var r={type:t._type,mobile:$('input[name="phone"]',t.$el).val(),code:$('input[name="dynamicCode"]',t.$el).val()};t._hasName&&(r.name=$('input[name="name"]',t.$el).val()),t._model.verMsg({type:"post",data:r})}return!1},validate:function(e){var t=this,n={phone:{required:!0,isTelephone:!0},dynamicCode:{required:!0,isCode:!0}},r={phone:{required:"手机号不能为空",isTelephone:"手机号格式不正确"},dynamicCode:{required:"动态码不能为空",isCode:"请输入6位数字动态码"}};return t._hasName&&(n.name={required:!0},r.name={required:"用户名不能为空"}),e.validate({errorElement:"span",errorPlacement:function(e,t){e.prepend(""),e.appendTo(t.closest(".form-control").find(".form-error"))},rules:n,messages:r})},_sendPhone:function(e){e.preventDefault();var n=this,r=/^(13[0-9]|15[012356789]|17[678]|18[0-9]|14[57])[0-9]{8}$/,i=$(e.currentTarget);if(!n._isSending){var s=$('input[name="phone"]',n.$el).val(),o=$('input[name="code"]',n.$el).val();r.test(s)?n._model.sendMsg({type:"post",data:{type:n._type,mobile:s,inputCode:o,uuid:n._uuid}},{node:i}):t.errorTip("手机号格式不正确",!0)}},sendMsg:function(e,n,r,i){var s=this;t.dealAjax(function(n){var r=e.data;if(!n){var o=i.node;o.addClass("btn-disabled"),t.successTip(e.resMsg,!0);var u=60,a=$(".nosend .num",s.$el).text(u);s._sendTimer&&clearInterval(s._sendTimer),s._sendTimer=setInterval(function(){a.text(--u),u||(clearInterval(s._sendTimer),o.removeClass("btn-disabled"),s._isSending=!1)},1e3),s._isSending=!0}else $('input[name="code"]',s.$el).val(""),s._isSending=!1;s._getUuid()},e,n)},verMsg:function(e,n,r,i){var o=this;t.dealAjax(function(n){var r=e.data;n?t.errorTip(e.resMsg,!0):o.trigger(s,r)},e,n)},getUuid:function(e,t,n,r){var i=this;i._uuid=e,i._setCode(e)},_setCode:function(e){var t=this,n=window.serviceBase+"/common/getSecurityCode?uuid="+e+"&t="+ +(new Date);$(".img-code",t.$el).html('<img src="'+n+'" />')}});return u}),define("index",["text!root-tpl/index.tpl","text!root-tpl/validation.tpl","text!root-tpl/result-list.tpl","root-common/util","./model","root-common/module/popup","root-common/module/phone-check/main"],function(e,t,n,r,i,s,o){var u=Backbone.View.extend({initialize:function(){var r=this;r._tpl=doT.template(e),r._validationTpl=doT.template(t),r._resultListTpl=doT.template(n),r._model=new i,r._model.bind({}),r._pop=null,r._phoneCheck=null},events:{},reset:function(){var e=this;e.$el.html(""),e._pop&&e._pop.close(),e._phoneCheck.reset()},init:function(){var e=this;e.render()},render:function(){var e=this;e.$el.html(e._tpl({})),e._pop=s.create({title:"成绩查询",custom:'<div class="phone-area"></div>',className:"pop-validation"}),e._phoneCheck=new o({el:$(".phone-area",e._pop.$el),baseUrl:window.serviceBase,tpl:t,hasName:!0,type:2}),window.hasVer?e.renderList():e._phoneCheck.bind({afterVer:function(t){window.hasVer=!0,window.articleList=t.list||[],window.token=t.token,e.renderList(),e._pop.resize()},validate:function(){e._pop.resize()}}),e._pop.resize()},renderList:function(){var e=this;$(".phone-area",e._pop.$el).html(e._resultListTpl({list:window.articleList,token:window.token}))}});return u}),define("text!root-tpl/report.tpl",[],function(){return'<div class="header">\n	<a href="#" class="logo">\n		<i class="icon-linear btn-back">&#xe900;</i>\n		<span class="img"></span>\n	</a>\n	<i class="icon-linear btn-top">&#xe910;</i>\n</div>\n<div class="nav-list">\n	<a class="nav-item item-writingDetail" href="#writingDetail/{{=window.token}}/{{=it.id}}">\n		<span class="num"></span>\n		<span class="txt">写作详情</span>\n	</a>\n	<a class="nav-item item-compositionAbility" href="#compositionAbility/{{=window.token}}/{{=it.id}}">\n		<span class="num"></span>\n		<span class="txt">作文能力评估数据</span>\n	</a>\n	<a class="nav-item item-skillAnalyze" href="#skillAnalyze/{{=window.token}}/{{=it.id}}">\n		<span class="num"></span>\n		<span class="txt">写作微技能评估</span>\n	</a>\n	<a class="nav-item item-writingLevel" href="#writingLevel/{{=window.token}}/{{=it.id}}">\n		<span class="num"></span>\n		<span class="txt">写作水平</span>\n	</a>\n	<a class="nav-item item-errorSummary" href="#errorSummary/{{=window.token}}/{{=it.id}}">\n		<span class="num"></span>\n		<span class="txt">错误汇总</span>\n	</a>\n	<a class="nav-item item-systemComment" href="#systemComment/{{=window.token}}/{{=it.id}}">\n		<span class="num"></span>\n		<span class="txt">系统评语</span>\n	</a>\n</div>\n<section class="panel-item panel-detail" id="writingDetail-{{=it.id}}">\n	<h2>\n		<span>写作详情</span>\n		<i class="icon"></i>\n	</h2>\n	<div class="inner"></div>\n</section>\n<section class="panel-item panel-ability" id="compositionAbility-{{=it.id}}">\n	<h2>\n		<span>作文能力评估数据</span>\n		<i class="icon"></i>\n	</h2>\n	<div class="inner">\n		<div class="chart" id="compositionAbilityChart"></div>\n		<div class="list"></div>\n	</div>\n</section>\n<section class="panel-item panel-analyze" id="skillAnalyze-{{=it.id}}">\n	<h2>\n		<span>写作微技能评估</span>\n		<i class="icon"></i>\n	</h2>\n	<div class="inner">\n		<div class="chart" id="skillAnalyzeChart" style="margin-top:-100px;"></div>\n		<div class="list"></div>\n	</div>\n</section>\n<section class="panel-item panel-level" id="writingLevel-{{=it.id}}">\n	<h2>\n		<span>写作水平</span>\n		<i class="icon"></i>\n	</h2>\n	<div class="inner"></div>\n</section>\n<section class="panel-item panel-summary" id="errorSummary-{{=it.id}}">\n	<h2>\n		<span>错误汇总</span>\n		<i class="icon"></i>\n	</h2>\n	<div class="inner">\n		<div class="chart" id="errorSummaryChart" style="padding:20px;"></div>\n		<div class="list"></div>\n	</div>\n</section>\n<section class="panel-item panel-comment" id="systemComment-{{=it.id}}">\n	<h2>\n		<span>系统评语</span>\n		<i class="icon"></i>\n	</h2>\n	<div class="inner"></div>\n</section>'}),define("text!root-tpl/report-detail.tpl",[],function(){return'<p class="info">\n	<span class="label">教师：</span>\n	<span class="txt txt-short">{{=it.teacher}}</span>\n</p>\n<p class="info">\n	<span class="label">学生：</span>\n	<span class="txt txt-short">{{=it.studentName}}</span>\n</p>\n<p class="info">\n	<span class="label">班级：</span>\n	<span class="txt txt-long">{{=it.classes}}</span>\n</p>\n<p class="info">\n	<span class="label">标题：</span>\n	<span class="txt txt-long txt-title">{{=it.essay_set_title}}</span>\n</p>\n<p class="info">\n	<span class="label">要求：</span>\n	<span>{{=it.essay_set_requirement}}</span>\n</p>\n<div class="content">\n	<div class="label">作文内容：</div>\n	<div class="content-info">\n		<span class="words">\n			字数：<i>{{=it.wordCount}}</i>字\n		</span>\n		<span class="time">\n			写作用时：<i>{{=it.formatTimeE(it.timeDiff * 1000)}}</i>\n		</span>\n		<!-- <span class="submit-times">\n			提交稿次：<i>1</i>次\n		</span> -->\n	</div>\n	<p class="title">{{=it.essay_set_title}}</p>\n	<p>{{=it.assignmentContent}}</p>\n</div>'}),define("text!root-tpl/report-ability.tpl",[],function(){return"{{\n    var mine = it.data[0];\n    var classes = it.data[1];\n    var grades = it.data[2];\n}}\n\n<table>\n    <thead>\n        <th>评分项目</th>\n        <th>评分</th>\n        <th>班级平均分</th>\n        <th>年级平均分</th>\n    </thead>\n    <tbody>\n        <tr>\n            <td>内容</td>\n            <td>{{=it.parseNum(mine.content)}}</td>\n            <td>{{=it.parseNum(classes['class-content'])}}</td>\n            <td>{{=it.parseNum(grades['grade-content'])}}</td>\n        </tr>\n        <tr>\n            <td>语言</td>\n            <td>{{=it.parseNum(mine.language)}}</td>\n            <td>{{=it.parseNum(classes['class-language'])}}</td>\n            <td>{{=it.parseNum(grades['grade-language'])}}</td>\n        </tr>\n        <tr>\n            <td>结构</td>\n            <td>{{=it.parseNum(mine.constuction)}}</td>\n            <td>{{=it.parseNum(classes['class-constuction'])}}</td>\n            <td>{{=it.parseNum(grades['grade-constuction'])}}</td>\n        </tr>\n        <tr>\n            <td>总分</td>\n            <td>{{=Number(mine.total).toFixed(2)}}</td>\n            <td>{{=Number(classes['class-total']).toFixed(2)}}</td>\n            <td>{{=Number(grades['grade-total']).toFixed(2)}}</td>\n        </tr>\n    </tbody>\n</table>"}),define("text!root-tpl/report-analyze.tpl",[],function(){return"<table>\n    <thead>\n        <th>能力分项</th>\n        <th>评分</th>\n        <th>班级平均分</th>\n        <th>年级平均分</th>\n    </thead>\n    <tbody>\n        <tr>\n            <td>篇章结构</td>\n            <td>{{=Number(it.mine.org).toFixed(2)}}</td>\n            <td>{{=Number(it.classo['class-org']).toFixed(2)}}</td>\n            <td>{{=Number(it.grades['grade-org']).toFixed(2)}}</td>\n            \n        </tr>\n        <tr>\n            <td>思想内容</td>\n            <td>{{=Number(it.mine.dev).toFixed(2)}}</td>\n            <td>{{=Number(it.classo['class-dev']).toFixed(2)}}</td>\n            <td>{{=Number(it.grades['grade-dev']).toFixed(2)}}</td>\n            \n        </tr>\n        <tr>\n            <td>句式运用</td>\n            <td>{{=Number(it.mine.ss).toFixed(2)}}</td>\n            <td>{{=Number(it.classo['class-ss']).toFixed(2)}}</td>\n            <td>{{=Number(it.grades['grade-ss']).toFixed(2)}}</td>\n        </tr>\n        <tr>\n            <td>词汇语法</td>\n            <td>{{=Number(it.mine.wc).toFixed(2)}}</td>\n            <td>{{=Number(it.classo['class-wc']).toFixed(2)}}</td>\n            <td>{{=Number(it.grades['grade-wc']).toFixed(2)}}</td>\n        </tr>\n        <tr>\n            <td>写作规范</td>\n            <td>{{=Number(it.mine.mech).toFixed(2)}}</td>\n            <td>{{=Number(it.classo['class-mech']).toFixed(2)}}</td>\n            <td>{{=Number(it.grades['grade-mech']).toFixed(2)}}</td>\n        </tr>\n    </tbody>\n</table>"}),define("text!root-tpl/report-level.tpl",[],function(){return'<p>蓝色代表班级平均分，橙色代表我的写作分数。</p>\n<div class="level">\n    <span class="point class-point" style="left:{{=it.classpoint}}%">\n    	<i class="caret"></i>\n    	<i class="txt">{{=it.classpoint}}</i>\n    </span>\n    <span class="point my-point" style="left:{{=it.mypoint}}%">\n    	<i class="caret"></i>\n    	<i class="txt">{{=it.mypoint}}</i>\n    </span>\n    <div class="img"></div>\n</div>\n'}),define("text!root-tpl/report-errors.tpl",[],function(){return"<table>\n    <thead>\n        <th>错误类型</th>\n        <th>数量</th>\n    </thead>\n    <tbody>\n        {{~it.list :v:i}}\n        <tr>\n            <td>{{=v.label}}</td>\n            <td>{{=v.value}}</td>\n        </tr>\n        {{~}}\n    </tbody>\n</table>"}),define("text!root-tpl/report-comment.tpl",[],function(){return"<p>{{=it.comment_ch}}</p>\n<p>{{=it.comment_en}}</p>"}),define("text!root-tpl/report-ability-svg.tpl",[],function(){return'{{\n    var mine = it.data[0];\n    var classes = it.data[1];\n    var grades = it.data[2];\n}}\n\n<?xml version="1.0"?>\n<chart exportEnabled="1" exportAtClient="0" exportAction="save" caption="{{=it.title}}" paletteColors="46B29A,FFBA00,00AEFF,FF6F37,A698f0,4169E1,087eb6,BA55D3,D2691E,FF7F50" showValues="0" plotGradientColor="" showBorder="0" bgColor="ffffff" canvasBorderColor="C4C3C1" alternateHGridAlpha="0" canvasBorderThickness="1" showPlotBorder="0" borderColor="ffffff" baseFontSize="12" palette="1" showFCMenuItem="1" imageSave="1">\n    <categories>\n        <category label="内容" />\n        <category label="语言" />\n        <category label="结构" />\n    </categories>\n    <dataset seriesName="我的评分">\n        <set value="{{=mine.content}}" />\n        <set value="{{=mine.language}}" />\n        <set value="{{=mine.constuction}}" />\n        <set value="{{=mine.total}}" />\n    </dataset>\n    <dataset seriesName="班级平均分">\n        <set value="{{=classes[\'class-content\']}}" />\n        <set value="{{=classes[\'class-language\']}}" />\n        <set value="{{=classes[\'class-constuction\']}}" />\n        <set value="{{=classes[\'class-total\']}}" />\n    </dataset>\n    <dataset seriesName="年级平均分">\n        <set value="{{=grades[\'grade-content\']}}" />\n        <set value="{{=grades[\'grade-language\']}}" />\n        <set value="{{=grades[\'grade-constuction\']}}" />\n        <set value="{{=grades[\'grade-total\']}}" />\n    </dataset>\n</chart>'}),define("report",["text!root-tpl/report.tpl","text!root-tpl/report-detail.tpl","text!root-tpl/report-ability.tpl","text!root-tpl/report-analyze.tpl","text!root-tpl/report-level.tpl","text!root-tpl/report-errors.tpl","text!root-tpl/report-comment.tpl","text!root-tpl/report-ability-svg.tpl","root-common/util","./model"],function(e,t,n,r,i,s,o,u,a,f){var l={COMMA_PARENTHESIS_WHITESPACE:"句法-标点",SENTENCE_WHITESPACE:"标点-句子间或句子内标点后没有空格",ADMIT_ENJOY_VB:"动词-固定词组",MORFOLOGIK_RULE_EN_GB:"词和词形-拼写"},c=Backbone.View.extend({initialize:function(){var a=this;a._tpl=doT.template(e),a._detailTpl=doT.template(t),a._reportAbilityTpl=doT.template(n),a._reportAnalyzeTpl=doT.template(r),a._reportLevelTpl=doT.template(i),a._reportErrorsTpl=doT.template(s),a._reportCommentTpl=doT.template(o),a._reportAbilitySvgTpl=doT.template(u),a._model=new f,a._model.bind({"find.report":$.proxy(a.findReport,a)}),a.reset()},events:{"click .btn-top":"_top"},reset:function(){var e=this;e.$el.html(""),e._id=null,e._position=""},init:function(e,t,n){var r=this;r._id=t,r._position=n,r._model.findReport({data:{assignmentId:r._id},token:window.token}),r.render()},render:function(){var e=this;e.$el.html(e._tpl({id:e._id}))},_top:function(e){e=e||0,$("html, body").stop().animate({scrollTop:e},500)},findReport:function(e,t,n,r){var i=this;a.dealAjax(function(t){var n=e.data;if(!t){console.log(n),$(".panel-detail > .inner",i.$el).html(i._detailTpl($.extend(!0,{formatTimeE:a.formatTimeE},n.detail)));var r=n.detail.essay_set_title;$(".panel-ability .list",i.$el).html(i._reportAbilityTpl($.extend(!0,{data:n.competencyAssessment,parseNum:i.parseNum},n.detail)));var s=new FusionCharts(window.staticsBase+"/common/scripts/lib/FusionCharts/Charts/MSColumn2D.swf","","100%","260","0","1");s.setDataXML(i._reportAbilitySvgTpl({title:r,data:n.competencyAssessment})),s.render("compositionAbilityChart"),i.renderMicro(n),$(".panel-level > .inner",i.$el).html(i._reportLevelTpl(n.writingLevel)),i.renderErrors(n),$(".panel-comment > .inner",i.$el).html(i._reportCommentTpl(n.reviews)),i._position&&i._top($("#"+i._position+"-"+i._id).offset().top)}},e,t)},parseNum:function(e){var t=e.split("/"),n=t[0],r=t[1];return Number(n).toFixed(2)+"/"+r},renderMicro:function(e){var t=this,n=e.microSkillsAssessment,r=n[0],i=n[1],s=n[2],o=new Highcharts.Chart({chart:{renderTo:"skillAnalyzeChart",inverted:!1,polar:!0,type:"area"},colors:["#18b1da","#ffba00","#ED561B","#DDDF00","#24CBE5","#64E572","#FF9655","#FFF263","#6AF9C4"],title:{text:""},xAxis:{categories:["篇章结构","思想内容","句式运用","词汇语法","写作规范"],tickmarkPlacement:"on",lineWidth:0},yAxis:{gridLineInterpolation:"polygon",lineWidth:0,min:0},legend:{align:"center",verticalAlign:"top",y:100,layout:"horizontal"},plotOptions:{area:{fillOpacity:"0.45",lineWidth:"1.0",marker:{enabled:!0,radius:"2"},states:{hover:{enabled:!1}}}},series:[{name:"我的评分",data:[r.org,r.dev,r.ss,r.wc,r.mech],pointPlacement:"on"},{name:"班级平均分",data:[i["class-org"],i["class-dev"],i["class-ss"],i["class-wc"],i["class-mech"]],pointPlacement:"on"},{name:"年级平均分",data:[s["grade-org"],s["grade-dev"],s["grade-ss"],s["grade-wc"],s["grade-mech"]],pointPlacement:"on"}]});$(".panel-analyze .list",t.$el).html(t._reportAnalyzeTpl($.extend(!0,{mine:r,classo:i,grades:s},e.detail)))},renderErrors:function(e){var t=this,n=e.errorList;n=t.getRuleData(n);var r=[];$.each(n,function(e,t){var n=t.label.split("-");r.push({label:n?n[1].length>3?n[1].slice(0,3)+"...":n[1]:t.label,value:t.value})});var i=new FusionCharts({type:"bar2d",renderAt:"errorSummaryChart",width:"100%",height:"350",dataFormat:"json",dataSource:{chart:{paletteColors:"#4f81be",bgColor:"#ffffff",showBorder:"0",showCanvasBorder:"0",usePlotGradientColor:"0",plotBorderAlpha:"10",valueFontColor:"#ffffff",showAxisLines:"1",axisLineAlpha:"25",divLineAlpha:"10",alignCaptionWithCanvas:"0",showAlternateVGridColor:"0"},data:r}});i.render(),$(".panel-summary .list",t.$el).html(t._reportErrorsTpl({list:n||[]}))},getRuleName:function(e){return l[e]||e},getRuleData:function(e){var t=this,n=[];return $.each(e,function(e,r){n.push({label:t.getRuleName(r.rule_id),value:r.count})}),n}});return c}),define("auto-domain",[],function(){var e="online",t=location.hostname,n=location.host,r="192.168.12.252",i="192.168.12.240",s="9080",o="http://",u=/192.168|localhost|debug.|127.0/;u.test(t)&&(e="test");try{e=="test"?(window.serviceBase=o+r+":"+s+"/haozuowenapi",window.imgPath=o+i+":9999",window.writeBase=o+i+":8081"):(window.serviceBase=o+t+":8087/haozuowenapi",window.imgPath=o+t+":9999",window.writeBase=o+t),/localhost/.test(t)?window.staticsBase=o+n:window.staticsBase=o+n+"/ui"}catch(a){alert("自适应域名脚本执行错误!\n")}}),require(["./router","./moduleManager","./index","./report","./auto-domain"],function(e,t,n,r){function i(){var e=$(window).width();if(e>700)var t=24;else var t=e*12/320;$("html").css("font-size",t+"px")}function a(){t.clear()}$.validator.addMethod("isTelephone",function(e,t,n){var r=/^(13[0-9]|15[012356789]|17[678]|18[0-9]|14[57])[0-9]{8}$/,i=$(t).val();return r.test(i)}),$.validator.addMethod("isCode",function(e,t,n){var r=/^\d{6}$/;return r.test($(t).val())}),$.validator.addMethod("isUsername",function(e,t,n){var r=/^[a-z0-9_]{6,30}$/g;return r.test($(t).val())}),window.hasVer=!1,window.articleList=null,window.token=null,i(),$(window).resize(i);var s=new e,o=t.add(new n({el:"#IndexPage"})),u=t.add(new r({el:"#ReportPage"}));s.bind({gotoHome:function(){a(),o.init()},gotoReport:function(e,t,n){a(),window.token=e,u.init(e,t,n)}}),Backbone.history.start()}),define("main",function(){});